!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(24),a=n(25),s=n(9),o=n(10),l=n(11),u=n(26),c=n(27),h=n(12),d=n(13);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return i}),n.d(e,"mat2d",function(){return a}),n.d(e,"mat3",function(){return s}),n.d(e,"mat4",function(){return o}),n.d(e,"quat",function(){return l}),n.d(e,"quat2",function(){return u}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return h}),n.d(e,"vec4",function(){return d})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*s},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};const r=1e-6;e.EPSILON=r;let i="undefined"!=typeof Float32Array?Float32Array:Array;const a=Math.random;e.RANDOM=a;const s=Math.PI/180},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),i=n(16),a=n(7),s=n(28);n.d(e,"Mesh",function(){return r.a}),n.d(e,"Material",function(){return i.a}),n.d(e,"MaterialLibrary",function(){return i.b}),n.d(e,"Layout",function(){return a.a}),n.d(e,"downloadModels",function(){return s.c}),n.d(e,"downloadMeshes",function(){return s.b}),n.d(e,"initMeshBuffers",function(){return s.e}),n.d(e,"deleteMeshBuffers",function(){return s.a}),n.d(e,"downloadMtlTextures",function(){return s.d})},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.keys=[],t.mouse_keys=[],t.mouse_x_total=0,t.mouse_y_total=0,t.updateProgressText=function(t){return r(this,void 0,void 0,function*(){document.getElementById("loading-text").innerText=t+"..."})},t.resetMousePosition=function(){t.mouse_x_total=0,t.mouse_y_total=0}}(e.global||(e.global={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),i=n(34);!function(t){t[t.BASIC=0]="BASIC",t[t.MESHLESS=1]="MESHLESS",t[t.ANIMATED=2]="ANIMATED"}(e.Model_Type||(e.Model_Type={}));e.Entity=class{constructor(t,e,n=r.vec3.fromValues(0,0,0),a=r.vec3.fromValues(0,0,-1),s=r.vec3.fromValues(1,1,1)){this.up=r.vec3.fromValues(0,1,0),this.id=i.Guid.newGuid(),this.position=r.vec3.clone(n),this.scalar=r.vec3.clone(s),this.forward=r.vec3.clone(a),this.mesh_name=t,this.model_type=e}getRight(){let t=r.vec3.create();return r.vec3.cross(t,this.forward,this.up),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=n(2);e.BasicModel=class{constructor(t,e=0,n=0){this.mesh=t,this.radius=e,this.half_height=n,this.initialized=!1,this.rotation_offset=0}init(t){this.VAO=t.createVertexArray(),r.initMeshBuffers(t,this.mesh),t.bindVertexArray(this.VAO),t.enableVertexAttribArray(0),t.bindBuffer(t.ARRAY_BUFFER,this.mesh.vertexBuffer),t.vertexAttribPointer(0,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(1),t.bindBuffer(t.ARRAY_BUFFER,this.mesh.textureBuffer),t.vertexAttribPointer(1,2,t.FLOAT,!0,0,0),t.enableVertexAttribArray(2),t.bindBuffer(t.ARRAY_BUFFER,this.mesh.normalBuffer),t.vertexAttribPointer(2,3,t.FLOAT,!1,0,0),this.initAllTextures(t),this.initialized=!0}initAllTextures(t){for(let e in this.mesh.materialsByIndex){let n=this.mesh.materialsByIndex[e];n.mapDiffuse&&(n.mapDiffuse.texture.complete?n.mapDiffuse.texture_id=this.loadTexture(t,n.mapDiffuse.texture):n.mapDiffuse.texture.addEventListener("load",()=>{n.mapDiffuse.texture_id=this.loadTexture(t,n.mapDiffuse.texture)})),n.mapAmbient&&(n.mapAmbient.texture.complete?n.mapAmbient.texture_id=this.loadTexture(t,n.mapAmbient.texture):n.mapAmbient.texture.addEventListener("load",()=>{n.mapAmbient.texture_id=this.loadTexture(t,n.mapAmbient.texture)})),n.mapEmissive&&(n.mapEmissive.texture.complete?n.mapEmissive.texture_id=this.loadTexture(t,n.mapEmissive.texture):n.mapEmissive.texture.addEventListener("load",()=>{n.mapEmissive.texture_id=this.loadTexture(t,n.mapEmissive.texture)}))}}loadTexture(t,e,n=!0){let r=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r),n&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),r}draw(t,e){this.activateBuffers(t);for(let n in this.mesh.materialsByIndex){let r=parseInt(n),i=this.mesh.vertexBuffer.itemSize,a=this.mesh.submesh[r];const s=2;this.activateMaterial(t,e,r),t.drawElements(t.TRIANGLES,i*a.numItems,t.UNSIGNED_SHORT,a.offset*i*s)}t.bindVertexArray(null)}activateBuffers(t){t.bindVertexArray(this.VAO),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.mesh.indexBuffer)}drawActivatedMaterial(t,e){let n=this.mesh.vertexBuffer.itemSize,r=this.mesh.submesh[e];t.drawElements(t.TRIANGLES,n*r.numItems,t.UNSIGNED_SHORT,r.offset*n*2)}activateMaterial(t,e,n){let r=this.mesh.materialsByIndex[n];e.activateMaterial(t,r)}}},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=n(30),s=Object.prototype.hasOwnProperty,o=Array.prototype.slice,l="foo"===function(){}.name;function u(t){return Object.prototype.toString.call(t)}function c(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=M,d=/\s*function\s+([^\(\s]*)\s*/;function m(t){if(a.isFunction(t)){if(l)return t.name;var e=t.toString().match(d);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function p(t){if(l||!a.isFunction(t))return a.inspect(t);var e=m(t);return"[Function"+(e?": "+e:"")+"]"}function _(t,e,n,r,i){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function M(t,e){t||_(t,!0,e,"==",h.ok)}function b(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(c(t)&&c(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=g(t),s=g(e);if(i&&!s||!i&&s)return!1;if(i)return t=o.call(t),e=o.call(e),b(t,e,n);var l,u,c=x(t),h=x(e);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),u=c.length-1;u>=0;u--)if(c[u]!==h[u])return!1;for(u=c.length-1;u>=0;u--)if(l=c[u],!b(t[l],e[l],n,r))return!1;return!0}(t,e,n,s))}return n?t===e:t==e}function g(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function y(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&_(i,n,"Missing expected exception"+r);var s="string"==typeof r,o=!t&&a.isError(i),l=!t&&i&&!n;if((o&&s&&v(i,n)||l)&&_(i,n,"Got unwanted exception"+r),t&&i&&n&&!v(i,n)||!t&&i)throw i}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(p((e=this).actual),128)+" "+e.operator+" "+f(p(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,a=m(n),s=i.indexOf("\n"+a);if(s>=0){var o=i.indexOf("\n",s+1);i=i.substring(o+1)}this.stack=i}}},a.inherits(h.AssertionError,Error),h.fail=_,h.ok=M,h.equal=function(t,e,n){t!=e&&_(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&_(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){b(t,e,!1)||_(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){b(t,e,!0)||_(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){b(t,e,!1)&&_(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){b(e,n,!0)&&_(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&_(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&_(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){y(!0,t,e,n)},h.doesNotThrow=function(t,e,n){y(!1,t,e,n)},h.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var n in t)s.call(t,n)&&e.push(n);return e}}).call(e,n(17))},function(t,e,n){"use strict";class r{constructor(...t){this.attributes=t;let e=0,n=0;for(const r of t){if(this[r.key])throw new i(r);e%r.sizeOfType!=0&&(e+=r.sizeOfType-e%r.sizeOfType,console.warn("Layout requires padding before "+r.key+" attribute")),this[r.key]={attribute:r,size:r.size,type:r.type,normalized:r.normalized,offset:e},e+=r.sizeInBytes,n=Math.max(n,r.sizeOfType)}e%n!=0&&(e+=n-e%n,console.warn("Layout requires padding at the back")),this.stride=e;for(const e of t)this[e.key].stride=this.stride}}e.a=r;class i{constructor(t){this.message="found duplicate attribute: "+t.key}}class a{constructor(t,e,n,r=!1){this.key=t,this.size=e,this.type=n,this.normalized=!1,this.sizeOfType=function(t){switch(t){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}(n),this.sizeInBytes=this.sizeOfType*e}}r.POSITION=new a("position",3,"FLOAT"),r.NORMAL=new a("normal",3,"FLOAT"),r.TANGENT=new a("tangent",3,"FLOAT"),r.BITANGENT=new a("bitangent",3,"FLOAT"),r.UV=new a("uv",2,"FLOAT"),r.MATERIAL_INDEX=new a("materialIndex",1,"SHORT"),r.MATERIAL_ENABLED=new a("materialEnabled",1,"UNSIGNED_SHORT"),r.AMBIENT=new a("ambient",3,"FLOAT"),r.DIFFUSE=new a("diffuse",3,"FLOAT"),r.SPECULAR=new a("specular",3,"FLOAT"),r.SPECULAR_EXPONENT=new a("specularExponent",3,"FLOAT"),r.EMISSIVE=new a("emissive",3,"FLOAT"),r.TRANSMISSION_FILTER=new a("transmissionFilter",3,"FLOAT"),r.DISSOLVE=new a("dissolve",1,"FLOAT"),r.ILLUMINATION=new a("illumination",1,"UNSIGNED_SHORT"),r.REFRACTION_INDEX=new a("refractionIndex",1,"FLOAT"),r.SHARPNESS=new a("sharpness",1,"FLOAT"),r.MAP_DIFFUSE=new a("mapDiffuse",1,"SHORT"),r.MAP_AMBIENT=new a("mapAmbient",1,"SHORT"),r.MAP_SPECULAR=new a("mapSpecular",1,"SHORT"),r.MAP_SPECULAR_EXPONENT=new a("mapSpecularExponent",1,"SHORT"),r.MAP_DISSOLVE=new a("mapDissolve",1,"SHORT"),r.ANTI_ALIASING=new a("antiAliasing",1,"UNSIGNED_SHORT"),r.MAP_BUMP=new a("mapBump",1,"SHORT"),r.MAP_DISPLACEMENT=new a("mapDisplacement",1,"SHORT"),r.MAP_DECAL=new a("mapDecal",1,"SHORT"),r.MAP_EMISSIVE=new a("mapEmissive",1,"SHORT")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t,e,n,r,i,a){let s=t-r,o=e-i;return s*s+o*o<=(n+a)*(n+a)}t.circleIntersection=e,t.pointCircleIntersection=function(t,n,r,i,a){return e(t,n,0,r,i,a)},t.cylinderIntersection=function(t,n,r,i,a,s){let o=r,l=s;return!(t[1]+o<i[1]-l||t[1]-o>i[1]+l)&&e(t[0],t[2],n,i[0],i[2],a)}}(e.Collision||(e.Collision={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,i,a,s,o,l,u){let c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=a,c[5]=s,c[6]=o,c[7]=l,c[8]=u,c},e.set=function(t,e,n,r,i,a,s,o,l,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t[6]=o,t[7]=l,t[8]=u,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*s-o*u,d=-c*a+o*l,m=u*a-s*l,f=n*h+r*d+i*m;if(!f)return null;return f=1/f,t[0]=h*f,t[1]=(-c*r+i*u)*f,t[2]=(o*r-i*s)*f,t[3]=d*f,t[4]=(c*n-i*l)*f,t[5]=(-o*n+i*a)*f,t[6]=m*f,t[7]=(-u*n+r*l)*f,t[8]=(s*n-r*a)*f,t},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t[0]=s*c-o*u,t[1]=i*u-r*c,t[2]=r*o-i*s,t[3]=o*l-a*c,t[4]=n*c-i*l,t[5]=i*a-n*o,t[6]=a*u-s*l,t[7]=r*l-n*u,t[8]=n*s-r*a,t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8];return e*(u*a-s*l)+n*(-u*i+s*o)+r*(l*i-a*o)},e.multiply=i,e.translate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],m=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=d*r+m*s+u,t[7]=d*i+m*o+c,t[8]=d*a+m*l+h,t},e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(n),m=Math.cos(n);return t[0]=m*r+d*s,t[1]=m*i+d*o,t[2]=m*a+d*l,t[3]=m*s-d*r,t[4]=m*o-d*i,t[5]=m*l-d*a,t[6]=u,t[7]=c,t[8]=h,t},e.scale=function(t,e,n){let r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=n+n,o=r+r,l=i+i,u=n*s,c=r*s,h=r*o,d=i*s,m=i*o,f=i*l,p=a*s,_=a*o,M=a*l;return t[0]=1-h-f,t[3]=c-M,t[6]=d+_,t[1]=c+M,t[4]=1-u-f,t[7]=m-p,t[2]=d-_,t[5]=m+p,t[8]=1-u-h,t},e.normalFromMat4=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],f=e[12],p=e[13],_=e[14],M=e[15],b=n*o-r*s,g=n*l-i*s,v=n*u-a*s,y=r*l-i*o,x=r*u-a*o,E=i*u-a*l,w=c*p-h*f,R=c*_-d*f,A=c*M-m*f,T=h*_-d*p,S=h*M-m*p,I=d*M-m*_,P=b*I-g*S+v*T+y*A-x*R+E*w;if(!P)return null;return P=1/P,t[0]=(o*I-l*S+u*T)*P,t[1]=(l*A-s*I-u*R)*P,t[2]=(s*S-o*A+u*w)*P,t[3]=(i*S-r*I-a*T)*P,t[4]=(n*I-i*A+a*R)*P,t[5]=(r*A-n*S-a*w)*P,t[6]=(p*E-_*x+M*y)*P,t[7]=(_*v-f*E-M*g)*P,t[8]=(f*x-p*v+M*b)*P,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=e[0],m=e[1],f=e[2],p=e[3],_=e[4],M=e[5],b=e[6],g=e[7],v=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-m)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-v)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))};var r=n(1);function i(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],m=n[1],f=n[2],p=n[3],_=n[4],M=n[5],b=n[6],g=n[7],v=n[8];return t[0]=d*r+m*s+f*u,t[1]=d*i+m*o+f*c,t[2]=d*a+m*l+f*h,t[3]=p*r+_*s+M*u,t[4]=p*i+_*o+M*c,t[5]=p*a+_*l+M*h,t[6]=b*r+g*s+v*u,t[7]=b*i+g*o+v*c,t[8]=b*a+g*l+v*h,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}const s=i;e.mul=s;const o=a;e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,i,a,s,o,l,u,c,h,d,m,f,p,_){let M=new r.ARRAY_TYPE(16);return M[0]=t,M[1]=e,M[2]=n,M[3]=i,M[4]=a,M[5]=s,M[6]=o,M[7]=l,M[8]=u,M[9]=c,M[10]=h,M[11]=d,M[12]=m,M[13]=f,M[14]=p,M[15]=_,M},e.set=function(t,e,n,r,i,a,s,o,l,u,c,h,d,m,f,p,_){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t[6]=o,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=d,t[12]=m,t[13]=f,t[14]=p,t[15]=_,t},e.identity=i,e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],f=e[12],p=e[13],_=e[14],M=e[15],b=n*o-r*s,g=n*l-i*s,v=n*u-a*s,y=r*l-i*o,x=r*u-a*o,E=i*u-a*l,w=c*p-h*f,R=c*_-d*f,A=c*M-m*f,T=h*_-d*p,S=h*M-m*p,I=d*M-m*_,P=b*I-g*S+v*T+y*A-x*R+E*w;if(!P)return null;return P=1/P,t[0]=(o*I-l*S+u*T)*P,t[1]=(i*S-r*I-a*T)*P,t[2]=(p*E-_*x+M*y)*P,t[3]=(d*x-h*E-m*y)*P,t[4]=(l*A-s*I-u*R)*P,t[5]=(n*I-i*A+a*R)*P,t[6]=(_*v-f*E-M*g)*P,t[7]=(c*E-d*v+m*g)*P,t[8]=(s*S-o*A+u*w)*P,t[9]=(r*A-n*S-a*w)*P,t[10]=(f*x-p*v+M*b)*P,t[11]=(h*v-c*x-m*b)*P,t[12]=(o*R-s*T-l*w)*P,t[13]=(n*T-r*R+i*w)*P,t[14]=(p*g-f*y-_*b)*P,t[15]=(c*y-h*g+d*b)*P,t},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],f=e[12],p=e[13],_=e[14],M=e[15];return t[0]=o*(d*M-m*_)-h*(l*M-u*_)+p*(l*m-u*d),t[1]=-(r*(d*M-m*_)-h*(i*M-a*_)+p*(i*m-a*d)),t[2]=r*(l*M-u*_)-o*(i*M-a*_)+p*(i*u-a*l),t[3]=-(r*(l*m-u*d)-o*(i*m-a*d)+h*(i*u-a*l)),t[4]=-(s*(d*M-m*_)-c*(l*M-u*_)+f*(l*m-u*d)),t[5]=n*(d*M-m*_)-c*(i*M-a*_)+f*(i*m-a*d),t[6]=-(n*(l*M-u*_)-s*(i*M-a*_)+f*(i*u-a*l)),t[7]=n*(l*m-u*d)-s*(i*m-a*d)+c*(i*u-a*l),t[8]=s*(h*M-m*p)-c*(o*M-u*p)+f*(o*m-u*h),t[9]=-(n*(h*M-m*p)-c*(r*M-a*p)+f*(r*m-a*h)),t[10]=n*(o*M-u*p)-s*(r*M-a*p)+f*(r*u-a*o),t[11]=-(n*(o*m-u*h)-s*(r*m-a*h)+c*(r*u-a*o)),t[12]=-(s*(h*_-d*p)-c*(o*_-l*p)+f*(o*d-l*h)),t[13]=n*(h*_-d*p)-c*(r*_-i*p)+f*(r*d-i*h),t[14]=-(n*(o*_-l*p)-s*(r*_-i*p)+f*(r*l-i*o)),t[15]=n*(o*d-l*h)-s*(r*d-i*h)+c*(r*l-i*o),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],m=t[12],f=t[13],p=t[14],_=t[15];return(e*s-n*a)*(h*_-d*p)-(e*o-r*a)*(c*_-d*f)+(e*l-i*a)*(c*p-h*f)+(n*o-r*s)*(u*_-d*m)-(n*l-i*s)*(u*p-h*m)+(r*l-i*o)*(u*f-c*m)},e.multiply=a,e.translate=function(t,e,n){let r,i,a,s,o,l,u,c,h,d,m,f,p=n[0],_=n[1],M=n[2];e===t?(t[12]=e[0]*p+e[4]*_+e[8]*M+e[12],t[13]=e[1]*p+e[5]*_+e[9]*M+e[13],t[14]=e[2]*p+e[6]*_+e[10]*M+e[14],t[15]=e[3]*p+e[7]*_+e[11]*M+e[15]):(r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],m=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=m,t[11]=f,t[12]=r*p+o*_+h*M+e[12],t[13]=i*p+l*_+d*M+e[13],t[14]=a*p+u*_+m*M+e[14],t[15]=s*p+c*_+f*M+e[15]);return t},e.scale=function(t,e,n){let r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,i){let a,s,o,l,u,c,h,d,m,f,p,_,M,b,g,v,y,x,E,w,R,A,T,S,I=i[0],P=i[1],D=i[2],L=Math.sqrt(I*I+P*P+D*D);if(L<r.EPSILON)return null;I*=L=1/L,P*=L,D*=L,a=Math.sin(n),s=Math.cos(n),o=1-s,l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],m=e[5],f=e[6],p=e[7],_=e[8],M=e[9],b=e[10],g=e[11],v=I*I*o+s,y=P*I*o+D*a,x=D*I*o-P*a,E=I*P*o-D*a,w=P*P*o+s,R=D*P*o+I*a,A=I*D*o+P*a,T=P*D*o-I*a,S=D*D*o+s,t[0]=l*v+d*y+_*x,t[1]=u*v+m*y+M*x,t[2]=c*v+f*y+b*x,t[3]=h*v+p*y+g*x,t[4]=l*E+d*w+_*R,t[5]=u*E+m*w+M*R,t[6]=c*E+f*w+b*R,t[7]=h*E+p*w+g*R,t[8]=l*A+d*T+_*S,t[9]=u*A+m*T+M*S,t[10]=c*A+f*T+b*S,t[11]=h*A+p*T+g*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},e.rotateX=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+u*r,t[5]=s*i+c*r,t[6]=o*i+h*r,t[7]=l*i+d*r,t[8]=u*i-a*r,t[9]=c*i-s*r,t[10]=h*i-o*r,t[11]=d*i-l*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[0],s=e[1],o=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-u*r,t[1]=s*i-c*r,t[2]=o*i-h*r,t[3]=l*i-d*r,t[8]=a*r+u*i,t[9]=s*r+c*i,t[10]=o*r+h*i,t[11]=l*r+d*i,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[0],s=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+u*r,t[1]=s*i+c*r,t[2]=o*i+h*r,t[3]=l*i+d*r,t[4]=u*i-a*r,t[5]=c*i-s*r,t[6]=h*i-o*r,t[7]=d*i-l*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let i,a,s,o=n[0],l=n[1],u=n[2],c=Math.sqrt(o*o+l*l+u*u);if(c<r.EPSILON)return null;return o*=c=1/c,l*=c,u*=c,i=Math.sin(e),a=Math.cos(e),s=1-a,t[0]=o*o*s+a,t[1]=l*o*s+u*i,t[2]=u*o*s-l*i,t[3]=0,t[4]=o*l*s-u*i,t[5]=l*l*s+a,t[6]=u*l*s+o*i,t[7]=0,t[8]=o*u*s+l*i,t[9]=l*u*s-o*i,t[10]=u*u*s+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=s,e.fromQuat2=function(t,e){let n=new r.ARRAY_TYPE(3),i=-e[0],a=-e[1],o=-e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7],m=i*i+a*a+o*o+l*l;m>0?(n[0]=2*(u*l+d*i+c*o-h*a)/m,n[1]=2*(c*l+d*a+h*i-u*o)/m,n[2]=2*(h*l+d*o+u*a-c*i)/m):(n[0]=2*(u*l+d*i+c*o-h*a),n[1]=2*(c*l+d*a+h*i-u*o),n[2]=2*(h*l+d*o+u*a-c*i));return s(t,e,n),t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[4],s=e[5],o=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(a*a+s*s+o*o),t[2]=Math.sqrt(l*l+u*u+c*c),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r);return t},e.fromRotationTranslationScale=function(t,e,n,r){let i=e[0],a=e[1],s=e[2],o=e[3],l=i+i,u=a+a,c=s+s,h=i*l,d=i*u,m=i*c,f=a*u,p=a*c,_=s*c,M=o*l,b=o*u,g=o*c,v=r[0],y=r[1],x=r[2];return t[0]=(1-(f+_))*v,t[1]=(d+g)*v,t[2]=(m-b)*v,t[3]=0,t[4]=(d-g)*y,t[5]=(1-(h+_))*y,t[6]=(p+M)*y,t[7]=0,t[8]=(m+b)*x,t[9]=(p-M)*x,t[10]=(1-(h+f))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){let a=e[0],s=e[1],o=e[2],l=e[3],u=a+a,c=s+s,h=o+o,d=a*u,m=a*c,f=a*h,p=s*c,_=s*h,M=o*h,b=l*u,g=l*c,v=l*h,y=r[0],x=r[1],E=r[2],w=i[0],R=i[1],A=i[2],T=(1-(p+M))*y,S=(m+v)*y,I=(f-g)*y,P=(m-v)*x,D=(1-(d+M))*x,L=(_+b)*x,k=(f+g)*E,O=(_-b)*E,F=(1-(d+p))*E;return t[0]=T,t[1]=S,t[2]=I,t[3]=0,t[4]=P,t[5]=D,t[6]=L,t[7]=0,t[8]=k,t[9]=O,t[10]=F,t[11]=0,t[12]=n[0]+w-(T*w+P*R+k*A),t[13]=n[1]+R-(S*w+D*R+O*A),t[14]=n[2]+A-(I*w+L*R+F*A),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=n+n,o=r+r,l=i+i,u=n*s,c=r*s,h=r*o,d=i*s,m=i*o,f=i*l,p=a*s,_=a*o,M=a*l;return t[0]=1-h-f,t[1]=c+M,t[2]=d-_,t[3]=0,t[4]=c-M,t[5]=1-u-f,t[6]=m+p,t[7]=0,t[8]=d+_,t[9]=m-p,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,a,s){let o=1/(n-e),l=1/(i-r),u=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(i+r)*l,t[10]=(s+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*u,t[15]=0,t},e.perspective=function(t,e,n,r,i){let a=1/Math.tan(e/2),s=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*s,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+o),u=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-o)*l*.5,t[9]=(i-a)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,a,s){let o=1/(e-n),l=1/(r-i),u=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*o,t[13]=(i+r)*l,t[14]=(s+a)*u,t[15]=1,t},e.lookAt=function(t,e,n,a){let s,o,l,u,c,h,d,m,f,p,_=e[0],M=e[1],b=e[2],g=a[0],v=a[1],y=a[2],x=n[0],E=n[1],w=n[2];if(Math.abs(_-x)<r.EPSILON&&Math.abs(M-E)<r.EPSILON&&Math.abs(b-w)<r.EPSILON)return i(t);d=_-x,m=M-E,f=b-w,p=1/Math.sqrt(d*d+m*m+f*f),s=v*(f*=p)-y*(m*=p),o=y*(d*=p)-g*f,l=g*m-v*d,(p=Math.sqrt(s*s+o*o+l*l))?(s*=p=1/p,o*=p,l*=p):(s=0,o=0,l=0);u=m*l-f*o,c=f*s-d*l,h=d*o-m*s,(p=Math.sqrt(u*u+c*c+h*h))?(u*=p=1/p,c*=p,h*=p):(u=0,c=0,h=0);return t[0]=s,t[1]=u,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=m,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=-(s*_+o*M+l*b),t[13]=-(u*_+c*M+h*b),t[14]=-(d*_+m*M+f*b),t[15]=1,t},e.targetTo=function(t,e,n,r){let i=e[0],a=e[1],s=e[2],o=r[0],l=r[1],u=r[2],c=i-n[0],h=a-n[1],d=s-n[2],m=c*c+h*h+d*d;m>0&&(m=1/Math.sqrt(m),c*=m,h*=m,d*=m);let f=l*d-u*h,p=u*c-o*d,_=o*h-l*c;(m=f*f+p*p+_*_)>0&&(m=1/Math.sqrt(m),f*=m,p*=m,_*=m);return t[0]=f,t[1]=p,t[2]=_,t[3]=0,t[4]=h*_-d*p,t[5]=d*f-c*_,t[6]=c*p-h*f,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=a,t[14]=s,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],m=t[10],f=t[11],p=t[12],_=t[13],M=t[14],b=t[15],g=e[0],v=e[1],y=e[2],x=e[3],E=e[4],w=e[5],R=e[6],A=e[7],T=e[8],S=e[9],I=e[10],P=e[11],D=e[12],L=e[13],k=e[14],O=e[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-y)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-x)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(o-E)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-w)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-R)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(c-A)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(h-T)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-S)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-I)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-D)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(_-L)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(M-k)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(k))&&Math.abs(b-O)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))};var r=n(1);function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],m=e[10],f=e[11],p=e[12],_=e[13],M=e[14],b=e[15],g=n[0],v=n[1],y=n[2],x=n[3];return t[0]=g*r+v*o+y*h+x*p,t[1]=g*i+v*l+y*d+x*_,t[2]=g*a+v*u+y*m+x*M,t[3]=g*s+v*c+y*f+x*b,g=n[4],v=n[5],y=n[6],x=n[7],t[4]=g*r+v*o+y*h+x*p,t[5]=g*i+v*l+y*d+x*_,t[6]=g*a+v*u+y*m+x*M,t[7]=g*s+v*c+y*f+x*b,g=n[8],v=n[9],y=n[10],x=n[11],t[8]=g*r+v*o+y*h+x*p,t[9]=g*i+v*l+y*d+x*_,t[10]=g*a+v*u+y*m+x*M,t[11]=g*s+v*c+y*f+x*b,g=n[12],v=n[13],y=n[14],x=n[15],t[12]=g*r+v*o+y*h+x*p,t[13]=g*i+v*l+y*d+x*_,t[14]=g*a+v*u+y*m+x*M,t[15]=g*s+v*c+y*f+x*b,t}function s(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=r+r,l=i+i,u=a+a,c=r*o,h=r*l,d=r*u,m=i*l,f=i*u,p=a*u,_=s*o,M=s*l,b=s*u;return t[0]=1-(m+p),t[1]=h+b,t[2]=d-M,t[3]=0,t[4]=h-b,t[5]=1-(c+p),t[6]=f+_,t[7]=0,t[8]=d+M,t[9]=f-_,t[10]=1-(c+m),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}const l=a;e.mul=l;const u=o;e.sub=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=l,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},e.multiply=u,e.rotateX=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(n),l=Math.cos(n);return t[0]=r*l+s*o,t[1]=i*l+a*o,t[2]=a*l-i*o,t[3]=s*l-r*o,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(n),l=Math.cos(n);return t[0]=r*l-a*o,t[1]=i*l+s*o,t[2]=a*l+r*o,t[3]=s*l-i*o,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*o,t[1]=i*l-r*o,t[2]=a*l+s*o,t[3]=s*l-a*o,t},e.calculateW=function(t,e){let n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=c,e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=n*n+r*r+i*i+a*a,o=s?1/s:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-i*o,t[3]=a*o,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=h,e.fromEuler=function(t,e,n,r){let i=.5*Math.PI/180;e*=i,n*=i,r*=i;let a=Math.sin(e),s=Math.cos(e),o=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=a*l*c-s*o*u,t[1]=s*o*c+a*l*u,t[2]=s*l*u-a*o*c,t[3]=s*l*c+a*o*u,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=n(1),i=n(9),a=n(12),s=n(13);function o(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function l(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function u(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+s*o+i*u-a*l,t[1]=i*c+s*l+a*o-r*u,t[2]=a*c+s*u+r*l-i*o,t[3]=s*c-r*o-i*l-a*u,t}function c(t,e,n,r){let i,a,s,o,l,u=e[0],c=e[1],h=e[2],d=e[3],m=n[0],f=n[1],p=n[2],_=n[3];return(a=u*m+c*f+h*p+d*_)<0&&(a=-a,m=-m,f=-f,p=-p,_=-_),1-a>1e-6?(i=Math.acos(a),s=Math.sin(i),o=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(o=1-r,l=r),t[0]=o*u+l*m,t[1]=o*c+l*f,t[2]=o*h+l*p,t[3]=o*d+l*_,t}function h(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let i=(r+1)%3,a=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*a+a]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[a]=(e[3*a+r]+e[3*r+a])*n}return t}const d=s.clone;e.clone=d;const m=s.fromValues;e.fromValues=m;const f=s.copy;e.copy=f;const p=s.set;e.set=p;const _=s.add;e.add=_;const M=u;e.mul=M;const b=s.scale;e.scale=b;const g=s.dot;e.dot=g;const v=s.lerp;e.lerp=v;const y=s.length;e.length=y;const x=y;e.len=x;const E=s.squaredLength;e.squaredLength=E;const w=E;e.sqrLen=w;const R=s.normalize;e.normalize=R;const A=s.exactEquals;e.exactEquals=A;const T=s.equals;e.equals=T;const S=function(){let t=a.create(),e=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,i,s){let o=a.dot(i,s);return o<-.999999?(a.cross(t,e,i),a.len(t)<1e-6&&a.cross(t,n,i),a.normalize(t,t),l(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,R(r,r))}}();e.rotationTo=S;const I=function(){let t=o(),e=o();return function(n,r,i,a,s,o){return c(t,r,s,o),c(e,i,a,o),c(n,t,e,2*o*(1-o)),n}}();e.sqlerp=I;const P=function(){let t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],R(e,h(e,t))}}();e.setAxes=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=s,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=o,e.multiply=l,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=c,e.squaredDistance=h,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=m,e.dot=f,e.cross=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=n[0],o=n[1],l=n[2];return t[0]=i*l-a*o,t[1]=a*s-r*l,t[2]=r*o-i*s,t},e.lerp=function(t,e,n,r){let i=e[0],a=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=s+r*(n[2]-s),t},e.hermite=function(t,e,n,r,i,a){let s=a*a,o=s*(2*a-3)+1,l=s*(a-2)+a,u=s*(a-1),c=s*(3-2*a);return t[0]=e[0]*o+n[0]*l+r[0]*u+i[0]*c,t[1]=e[1]*o+n[1]*l+r[1]*u+i[1]*c,t[2]=e[2]*o+n[2]*l+r[2]*u+i[2]*c,t},e.bezier=function(t,e,n,r,i,a){let s=1-a,o=s*s,l=a*a,u=o*s,c=3*a*o,h=3*l*s,d=l*a;return t[0]=e[0]*u+n[0]*c+r[0]*h+i[0]*d,t[1]=e[1]*u+n[1]*c+r[1]*h+i[1]*d,t[2]=e[2]*u+n[2]*c+r[2]*h+i[2]*d,t},e.random=function(t,e){e=e||1;let n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=i*e,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=n[3]*r+n[7]*i+n[11]*a+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/s,t},e.transformMat3=function(t,e,n){let r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){let r=n[0],i=n[1],a=n[2],s=n[3],o=e[0],l=e[1],u=e[2],c=i*u-a*l,h=a*o-r*u,d=r*l-i*o,m=i*d-a*h,f=a*c-r*d,p=r*h-i*c,_=2*s;return c*=_,h*=_,d*=_,m*=2,f*=2,p*=2,t[0]=o+c+m,t[1]=l+h+f,t[2]=u+d+p,t},e.rotateX=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){let n=s(t[0],t[1],t[2]),r=s(e[0],e[1],e[2]);m(n,n),m(r,r);let i=f(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=e[0],o=e[1],l=e[2];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};var r=n(1);function i(){let t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function s(t,e,n){let i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function h(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function d(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function m(t,e){let n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function f(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}const p=o;e.sub=p;const _=l;e.mul=_;const M=u;e.div=M;const b=c;e.dist=b;const g=h;e.sqrDist=g;const v=a;e.len=v;const y=d;e.sqrLen=y;const x=function(){let t=i();return function(e,n,r,i,a,s){let o,l;for(n||(n=3),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,o=r;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}();e.forEach=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,i){let a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=s,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=l,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=u,e.squaredDistance=c,e.length=h,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=n*n+r*r+i*i+a*a;s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=a*s);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){let i=e[0],a=e[1],s=e[2],o=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=s+r*(n[2]-s),t[3]=o+r*(n[3]-o),t},e.random=function(t,e){var n,i,a,s,o,u;e=e||1;do{n=2*r.RANDOM()-1,i=2*r.RANDOM()-1,o=n*n+i*i}while(o>=1);do{a=2*r.RANDOM()-1,s=2*r.RANDOM()-1,u=a*a+s*s}while(u>=1);var c=Math.sqrt((1-o)/u);return t[0]=l*n,t[1]=l*i,t[2]=l*a*c,t[3]=l*s*c,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*s,t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=n[0],o=n[1],l=n[2],u=n[3],c=u*r+o*a-l*i,h=u*i+l*r-s*a,d=u*a+s*i-o*r,m=-s*r-o*i-l*a;return t[0]=c*u+m*-s+h*-l-d*-o,t[1]=h*u+m*-o+d*-s-c*-l,t[2]=d*u+m*-l+c*-o-h*-s,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-c)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))};var r=n(1);function i(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function o(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function l(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function u(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}function h(t){let e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function d(t){let e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}const m=a;e.sub=m;const f=s;e.mul=f;const p=o;e.div=p;const _=u;e.dist=_;const M=c;e.sqrDist=M;const b=h;e.len=b;const g=d;e.sqrLen=g;const v=function(){let t=i();return function(e,n,r,i,a,s){let o,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,o=r;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();e.forEach=v},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(5),a=n(3),s=n(2),o=n(0),l=n(29);let u=n(2),c=a.global.gl;var h,d;!function(t){t[t.Start=0]="Start",t[t.Run1=1]="Run1",t[t.Run2=2]="Run2",t[t.Run3=3]="Run3",t[t.Run4=4]="Run4",t[t.Run5=5]="Run5",t[t.StartReverse=6]="StartReverse"}(h||(h={})),function(t){t[t.Standing=0]="Standing",t[t.Jumping=1]="Jumping",t[t.Falling=2]="Falling",t[t.Running=3]="Running",t[t.Strafing=4]="Strafing",t[t.Reversing=5]="Reversing"}(d=e.Player_State||(e.Player_State={}));e.PlayerModel=class{constructor(){this.PLAYER_FOLDER="/assets/models/actors/cbabe/",this.state=d.Standing,this.time_into_frame=0,this.animation_rate=1,this.radius=.25,this.half_height=.8,c=c||a.global.gl,this.run_frames=new Array(7);for(let t of this.run_frames)t={model:null,duration:null};this.run_frames[0]={model:null,duration:260},this.run_frames[1]={model:null,duration:260},this.run_frames[2]={model:null,duration:260},this.run_frames[3]={model:null,duration:350},this.run_frames[4]={model:null,duration:260},this.run_frames[5]={model:null,duration:260},this.run_frames[6]={model:null,duration:260},this.run_state=h.Start}updateAnimation(t){let e=this.run_state;switch(this.state){case d.Running:case d.Strafing:this.time_into_frame+=t*this.animation_rate,this.time_into_frame>this.run_frames[e].duration&&(this.time_into_frame-=this.run_frames[e].duration,this.run_state=this.run_state+1,this.run_state>h.Run5&&(this.run_state=h.Run1));break;case d.Reversing:this.time_into_frame-=t*this.animation_rate,this.time_into_frame<0&&(this.run_state=this.run_state-1,this.run_state<h.Run1&&(this.run_state=h.Run5),e=this.run_state,this.time_into_frame+=this.run_frames[e].duration)}}draw(t,e,n,r,i,a){switch(this.state){case d.Running:case d.Strafing:case d.Reversing:o.mat4.translate(n,n,o.vec3.fromValues(0,-.035,0))}switch(e.setMVPMatrices(n,r,i,a),this.state){case d.Running:case d.Strafing:case d.Reversing:{let n=this.time_into_frame/this.run_frames[this.run_state].duration;this.run_frames[this.run_state].model.draw(t,e,n);break}case d.Standing:this.stand_model.draw(t,e);break;case d.Jumping:case d.Falling:this.jump_model.draw(t,e)}}setState(t){if(this.state!=t){switch(t){case d.Strafing:case d.Running:this.state!=d.Strafing&&this.state!=d.Running&&(this.time_into_frame=0,this.run_state=h.Start);break;case d.Reversing:this.run_state=h.StartReverse;let e=this.run_state.valueOf();this.time_into_frame=this.run_frames[e].duration}switch(t){case d.Reversing:case d.Strafing:this.animation_rate=.6;break;case d.Running:this.animation_rate=1}this.state=t}}init(t){this.stand_model.init(t),this.jump_model.init(t)}load(){return r(this,void 0,void 0,function*(){let t=yield u.downloadModels([{name:"cbabe_stand",obj:this.PLAYER_FOLDER+"cbabe_stand.obj",downloadMtlTextures:!1},{name:"cbabe_jump",obj:this.PLAYER_FOLDER+"cbabe_jump.obj",downloadMtlTextures:!1},{name:"cbabe_run_start",obj:this.PLAYER_FOLDER+"cbabe_run_start.obj",downloadMtlTextures:!1},{name:"cbabe_run_loop0",obj:this.PLAYER_FOLDER+"cbabe_run_loop0.obj",downloadMtlTextures:!1},{name:"cbabe_run_loop1",obj:this.PLAYER_FOLDER+"cbabe_run_loop1.obj",downloadMtlTextures:!1},{name:"cbabe_run_loop2",obj:this.PLAYER_FOLDER+"cbabe_run_loop2.obj",downloadMtlTextures:!1},{name:"cbabe_run_loop3",obj:this.PLAYER_FOLDER+"cbabe_run_loop3.obj",downloadMtlTextures:!1},{name:"cbabe_run_loop4",obj:this.PLAYER_FOLDER+"cbabe_run_loop4.obj",downloadMtlTextures:!1}]),e=window.location.href.substr(0,window.location.href.lastIndexOf("/")),n=yield(yield fetch(e+this.PLAYER_FOLDER+"cbabe.mtl")).text(),r=new s.MaterialLibrary(n);yield u.downloadMtlTextures(r,e+this.PLAYER_FOLDER),t.cbabe_stand.addMaterialLibrary(r),t.cbabe_jump.addMaterialLibrary(r),t.cbabe_run_start.addMaterialLibrary(r),t.cbabe_run_loop0.addMaterialLibrary(r),t.cbabe_run_loop1.addMaterialLibrary(r),t.cbabe_run_loop2.addMaterialLibrary(r),t.cbabe_run_loop3.addMaterialLibrary(r),t.cbabe_run_loop4.addMaterialLibrary(r),this.stand_model=new i.BasicModel(t.cbabe_stand),this.jump_model=new i.BasicModel(t.cbabe_jump),this.run_frames[0].model=new l.KeyframeInterpModel(t.cbabe_run_start,t.cbabe_run_loop0),this.run_frames[1].model=new l.KeyframeInterpModel(t.cbabe_run_loop0,t.cbabe_run_loop1),this.run_frames[2].model=new l.KeyframeInterpModel(t.cbabe_run_loop1,t.cbabe_run_loop2),this.run_frames[3].model=new l.KeyframeInterpModel(t.cbabe_run_loop2,t.cbabe_run_loop3),this.run_frames[4].model=new l.KeyframeInterpModel(t.cbabe_run_loop3,t.cbabe_run_loop4),this.run_frames[5].model=new l.KeyframeInterpModel(t.cbabe_run_loop4,t.cbabe_run_loop0),this.run_frames[6].model=new l.KeyframeInterpModel(t.cbabe_run_loop0,t.cbabe_run_start),this.stand_model.init(c),this.jump_model.init(c),this.run_frames[0].model.init(c),this.run_frames[1].model.init(c),this.run_frames[2].model.init(c),this.run_frames[3].model.init(c),this.run_frames[4].model.init(c),this.run_frames[5].model.init(c),this.run_frames[6].model.init(c)})}}},function(t,e,n){"use strict";var r=n(7);e.a=class{constructor(t,e){(e=e||{}).materials=e.materials||[],this.has_materials=!!e.materials,this.materials={},this.submesh={},this.vertices=[],this.vertexNormals=[],this.textures=[],this.indices=[],this.name="";const n=[],r=[],i=[],a={},s=[],o={};let l=-1;a.verts=[],a.norms=[],a.textures=[],a.hashindices={},a.indices=[],a.materialIndices=[],a.index=0;let u=[],c=0,h=0;const d=/^v\s/,m=/^vn\s/,f=/^vt\s/,p=/^f\s/,_=/\s+/,M=/^usemtl/,b=t.split("\n");for(let t=0;t<b.length;t++){const e=b[t].trim();if(!e||e.startsWith("#"))continue;const g=e.split(_);if(g.shift(),d.test(e))n.push(...g);else if(m.test(e))r.push(...g);else if(f.test(e))i.push(g[0]),i.push(g[1]);else if(M.test(e)){const t=g[0];t in o||(0!==c&&u.push({offset:h,numItems:c}),h+=c,c=0,s.push(t),o[t]=s.length-1),l=o[t]}else if(p.test(e)){c++;let t=!1;for(let e=0,s=g.length;e<s;e++){3!==e||t||(e=2,t=!0,c++);const s=g[0]+","+l,o=g[e]+","+l;if(o in a.hashindices)a.indices.push(a.hashindices[o]);else{let t=g[e].split("/"),s=t.length-1;a.verts.push(+n[3*(t[0]-1)+0]),a.verts.push(+n[3*(t[0]-1)+1]),a.verts.push(+n[3*(t[0]-1)+2]),i.length&&(a.textures.push(+i[2*(t[1]-1)+0]),a.textures.push(+i[2*(t[1]-1)+1])),a.norms.push(+r[3*(t[s]-1)+0]),a.norms.push(+r[3*(t[s]-1)+1]),a.norms.push(+r[3*(t[s]-1)+2]),a.materialIndices.push(l),a.hashindices[o]=a.index,a.indices.push(a.index),a.index+=1}3===e&&t&&a.indices.push(a.hashindices[s])}}}u.push({offset:h,numItems:c}),this.vertices=a.verts,this.vertexNormals=a.norms,this.textures=a.textures,this.vertexMaterialIndices=a.materialIndices,this.indices=a.indices,this.submesh=u,this.materialNames=s,this.materialIndices=o,this.materialsByIndex={}}makeBufferData(t){const e=this.vertices.length/3,n=new ArrayBuffer(t.stride*e);n.numItems=e;const i=new DataView(n);for(let n=0,a=0;n<e;n++){a=n*t.stride;for(const e of t.attributes){const s=a+t[e.key].offset;switch(e.key){case r.a.POSITION.key:i.setFloat32(s,this.vertices[3*n],!0),i.setFloat32(s+4,this.vertices[3*n+1],!0),i.setFloat32(s+8,this.vertices[3*n+2],!0);break;case r.a.UV.key:i.setFloat32(s,this.textures[2*n],!0),i.setFloat32(s+4,this.vertices[2*n+1],!0);break;case r.a.NORMAL.key:i.setFloat32(s,this.vertexNormals[3*n],!0),i.setFloat32(s+4,this.vertexNormals[3*n+1],!0),i.setFloat32(s+8,this.vertexNormals[3*n+2],!0);break;case r.a.MATERIAL_INDEX.key:i.setInt16(s,this.vertexMaterialIndices[n],!0);break;case r.a.AMBIENT.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.ambient[0],!0),i.setFloat32(s+4,e.ambient[1],!0),i.setFloat32(s+8,e.ambient[2],!0);break}case r.a.DIFFUSE.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.diffuse[0],!0),i.setFloat32(s+4,e.diffuse[1],!0),i.setFloat32(s+8,e.diffuse[2],!0);break}case r.a.SPECULAR.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.specular[0],!0),i.setFloat32(s+4,e.specular[1],!0),i.setFloat32(s+8,e.specular[2],!0);break}case r.a.SPECULAR_EXPONENT.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.specularExponent,!0);break}case r.a.EMISSIVE.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.emissive[0],!0),i.setFloat32(s+4,e.emissive[1],!0),i.setFloat32(s+8,e.emissive[2],!0);break}case r.a.TRANSMISSION_FILTER.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.transmissionFilter[0],!0),i.setFloat32(s+4,e.transmissionFilter[1],!0),i.setFloat32(s+8,e.transmissionFilter[2],!0);break}case r.a.DISSOLVE.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.dissolve,!0);break}case r.a.ILLUMINATION.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setInt16(s,e.illumination,!0);break}case r.a.REFRACTION_INDEX.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.refractionIndex,!0);break}case r.a.SHARPNESS.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setFloat32(s,e.sharpness,!0);break}case r.a.ANTI_ALIASING.key:{const t=this.vertexMaterialIndices[n],e=this.materialsByIndex[t];if(!e){console.warn('Material "'+this.materialNames[t]+'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');break}i.setInt16(s,e.antiAliasing,!0);break}}}}return n}makeIndexBufferData(){const t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}addMaterialLibrary(t){for(const e in t.materials){if(!(e in this.materialIndices))continue;const n=t.materials[e],r=this.materialIndices[n.name];this.materials[e]=n,this.materialsByIndex[r]=n}}}},function(t,e,n){"use strict";const r=0,i=.2,a=.8,s=0,o=20,l=1,u=1,c=2;class h{constructor(t){this.name=t,this.illumination=c,this.ambient=[i,i,i],this.mapAmbient=null,this.diffuse=[a,a,a],this.mapDiffuse=null,this.transparency=1,this.mapTransparency=null,this.specular=[s,s,s],this.mapSpecular=null,this.mapSpecularExponent=null,this.specularExponent=o,this.emissive=[r,r,r],this.mapEmissive=null,this.transmissionFilter=[u,u,u],this.dissolve=0,this.mapDissolve=null,this.refractionIndex=l,this.sharpness=0,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapReflections=[],this.isTextureActive=new Array(6),this.textureIds=[]}updateActiveTextures(){0===this.illumination&&(this.emissive[0]=Math.min(this.emissive[0]+this.diffuse[0]+this.ambient[0],1),this.emissive[1]=Math.min(this.emissive[1]+this.diffuse[1]+this.ambient[1],1),this.emissive[2]=Math.min(this.emissive[2]+this.diffuse[2]+this.ambient[2],1),this.mapEmissive=this.mapAmbient||this.mapDiffuse||this.mapEmissive,this.diffuse=[0,0,0],this.ambient=[0,0,0],this.mapDiffuse=null,this.mapAmbient=null),this.isTextureActive[0]=null!=this.mapTransparency,this.isTextureActive[1]=null!=this.mapEmissive,this.isTextureActive[2]=null!=this.mapAmbient,this.isTextureActive[3]=null!=this.mapDiffuse,this.isTextureActive[4]=null!=this.mapSpecular,this.isTextureActive[5]=null!=this.mapSpecularExponent}}e.a=h;e.b=class{constructor(t){this.data=t,this.currentMaterial=null,this.materials=[],this.parse();for(let t in this.materials)this.materials[t].updateActiveTextures()}parse_newmtl(t){let e=t[0];this.currentMaterial=new h(e),this.materials[e]=this.currentMaterial}parseColor(t){if("spectral"==t[0])return void console.error("The MTL parser does not support spectral curve files. You will need to convert the MTL colors to either RGB or CIEXYZ.");if("xyz"==t[0])return void console.warn("TODO: convert XYZ to RGB");if(3==t.length)return t.map(parseFloat);let e=parseFloat(t[0]);return[e,e,e]}parse_Ka(t){this.currentMaterial.ambient=this.parseColor(t)}parse_Kd(t){this.currentMaterial.diffuse=this.parseColor(t)}parse_Ks(t){this.currentMaterial.specular=this.parseColor(t)}parse_Ke(t){this.currentMaterial.emissive=this.parseColor(t)}parse_Tf(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}parse_d(t){this.currentMaterial.transparency=1-parseFloat(t.pop())}parse_Tr(t){this.currentMaterial.transparency=parseFloat(t.pop())}parse_illum(t){this.currentMaterial.illumination=parseInt(t[0])}parse_Ni(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}parse_Ns(t){this.currentMaterial.specularExponent=parseInt(t[0])}parse_sharpness(t){this.currentMaterial.sharpness=parseInt(t[0])}parse_cc(t,e){e.colorCorrection="on"==t[0]}parse_blendu(t,e){e.horizontalBlending="on"==t[0]}parse_blendv(t,e){e.verticalBlending="on"==t[0]}parse_boost(t,e){e.boostMipMapSharpness=parseFloat(t[0])}parse_mm(t,e){e.modifyTextureMap.brightness=parseFloat(t[0]),e.modifyTextureMap.contrast=parseFloat(t[1])}parse_ost(t,e,n){for(;t.length<3;)t.push(n);e.u=parseFloat(t[0]),e.v=parseFloat(t[1]),e.w=parseFloat(t[2])}parse_o(t,e){this.parse_ost(t,e.offset,0)}parse_s(t,e){this.parse_ost(t,e.scale,1)}parse_t(t,e){this.parse_ost(t,e.turbulence,0)}parse_texres(t,e){e.textureResolution=parseFloat(t[0])}parse_clamp(t,e){e.clamp="on"==t[0]}parse_bm(t,e){e.bumpMultiplier=parseFloat(t[0])}parse_imfchan(t,e){e.imfChan=t[0]}parse_type(t,e){e.reflectionType=t[0]}parseOptions(t){let e,n,r={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},i={};for(t.reverse();t.length;){const n=t.pop();n.startsWith("-")?i[e=n.substr(1)]=[]:i[e].push(n)}for(e in i){if(!i.hasOwnProperty(e))continue;n=i[e];let t=this[`parse_${e}`];t&&t.bind(this)(n,r)}return r}parseMap(t){let e,n;return t[0].startsWith("-")?(e=t.pop(),n=t):[e,...n]=t,(n=this.parseOptions(n)).filename=e,n}parse_map_Ka(t){this.currentMaterial.mapAmbient=this.parseMap(t)}parse_map_Kd(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}parse_map_Ks(t){this.currentMaterial.mapSpecular=this.parseMap(t)}parse_map_Ke(t){this.currentMaterial.mapEmissive=this.parseMap(t)}parse_map_Ns(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}parse_map_d(t){this.currentMaterial.mapTransparency=this.parseMap(t)}parse_map_Tr(t){this.currentMaterial.mapTransparency=this.parseMap(t)}parse_map_aat(t){this.currentMaterial.antiAliasing="on"==t[0]}parse_map_bump(t){this.currentMaterial.mapBump=this.parseMap(t)}parse_bump(t){this.parse_map_bump(t)}parse_disp(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}parse_decal(t){this.currentMaterial.mapDecal=this.parseMap(t)}parse_refl(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}parse(){let t=this.data.split(/\r?\n/);for(let e of t){if(!(e=e.trim())||e.startsWith("#"))continue;let t,n=e.split(/\s/);[t,...n]=n;let r=this[`parse_${t}`];r?r.bind(this)(n):console.warn(`Don't know how to parse the directive: "${t}"`)}delete this.data,this.currentMaterial=null}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);!function(t){t.barycentric=function(t,e,n,i){let a=r.vec2.create(),s=r.vec2.create(),o=r.vec2.create();r.vec2.sub(a,n,e),r.vec2.sub(s,i,e),r.vec2.sub(o,t,e);let l=r.vec2.dot(a,a),u=r.vec2.dot(a,s),c=r.vec2.dot(s,s),h=r.vec2.dot(o,a),d=r.vec2.dot(o,s),m=1/(l*c-u*u),f=r.vec3.create();return f[1]=(c*h-u*d)*m,f[2]=(l*d-u*h)*m,f[0]=1-f[1]-f[2],f},t.vec2_rotate=function(t,e,n){let r=Math.cos(n),i=Math.sin(n);return t[0]=r*e[0]-i*e[1],t[1]=i*e[0]+r*e[1],t}}(e.MathHelper||(e.MathHelper={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),i=n(36),a=n(37),s=n(4),o=n(18),l=n(20);var u;!function(t){t[t.RED_ROCK=0]="RED_ROCK",t[t.LEAFY=1]="LEAFY",t[t.ICY=2]="ICY",t[t.SANDY=3]="SANDY",t[t.GREY_ROCK=4]="GREY_ROCK"}(u=e.Terrain||(e.Terrain={}));const c=16,h=32,d=48,m=64,f=80;class p extends s.Entity{constructor(t,e,n,i,a,o){if(super(t.mesh.name,s.Model_Type.BASIC,r.vec3.fromValues(i,a,o),r.vec3.fromValues(0,0,0),r.vec3.fromValues(n,1,n)),!t.initialized)throw"DiskModel was not initialized";this.model=t,this.radius=n,this.type=e,this.initialized=!1}init(t){this.generateHeightMapModels(t),this.heightMapModel.init(t);let e=this.radius*Math.SQRT2/2,n=r.vec3.fromValues(2*e/this.heightMapSize,1,2*e/this.heightMapSize),i=r.vec3.fromValues(this.position[0],this.position[1]+1e-4,this.position[2]);this.heightMapEntity=new s.Entity(this.heightMapModel.name,s.Model_Type.MESHLESS,i,this.forward,n),p.height_map_model_gen_count++,this.initialized=!0}generateHeightMapModels(t){switch(this.type){case u.RED_ROCK:this.heightMapSize=c,this.initRedRockHeightMap();break;case u.LEAFY:this.heightMapSize=h,this.initLeafyHeightMap();break;case u.ICY:this.heightMapSize=d,this.initIcyHeightMap();break;case u.SANDY:this.heightMapSize=m,this.initSandyHeightMap();break;case u.GREY_ROCK:this.heightMapSize=f,this.initGreyRockHeightMap()}this.generateHeightMapModel(t)}generateHeightMapModel(t){let e=(this.heightMapSize+1)*(this.heightMapSize+1),n=new Float32Array(8*e),r=0;for(let t=0;t<this.heightMapSize+1;t++)for(let e=0;e<this.heightMapSize+1;e++)n[r++]=t-this.heightMapSize/2,n[r++]=this.heightMap[t][e]+1e-5,n[r++]=e-this.heightMapSize/2,n[r++]=t/16,n[r++]=e/16,n[r++]=0,n[r++]=0,n[r++]=0;let a=this.heightMapSize*this.heightMapSize*6,s=new Uint16Array(a);r=0;for(let t=0;t<e-(this.heightMapSize+1);t+=this.heightMapSize+1)for(let e=0;e<this.heightMapSize;e++){const n=t+e;s[r++]=n+(this.heightMapSize+1),s[r++]=n,s[r++]=n+(this.heightMapSize+1)+1,s[r++]=n+(this.heightMapSize+1)+1,s[r++]=n,s[r++]=n+1}for(let t=0;t<a-2;t+=3){const e=8*s[t],r=8*s[t+1],i=8*s[t+2];let a=new Array(3);const o=n[r]-n[e],l=n[r+1]-n[e+1],u=n[r+2]-n[e+2],c=n[i]-n[e],h=n[i+1]-n[e+1],d=n[i+2]-n[e+2];a[0]=l*d-u*h,a[1]=u*c-o*d,a[2]=o*h-l*c,n[e+5]+=a[0],n[e+6]+=a[1],n[e+7]+=a[2],n[r+5]+=a[0],n[r+6]+=a[1],n[r+7]+=a[2],n[i+5]+=a[0],n[i+6]+=a[1],n[i+7]+=a[2]}this.heightMapModel=new i.MeshlessModel(n,s,this.model.mesh.materialsByIndex[2])}initRedRockHeightMap(){this.heightMap=[];let t=[];t.push(0,0);for(let e=2;e<=this.heightMapSize/2;e++){let n=t[e-1];t.push(Math.round(10*(n+3*Math.random()-1))/10)}for(let e=0;e<=this.heightMapSize;e++){this.heightMap[e]=[];let n=e>this.heightMapSize/2?this.heightMapSize-e:e;for(let r=0;r<=this.heightMapSize;r++){r>this.heightMapSize-n&&n--;let i=r;i>n&&(i=n),this.heightMap[e].push(t[i])}}}initSandyHeightMap(){this.heightMap=[];let t=new a.Noisefield(16,8,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295)),e=new Array(this.heightMapSize+1),n=1-Math.pow(.5,6);for(let t=0;t<=this.heightMapSize;t++){let n=t/this.heightMapSize;e[t]=Math.max(Math.pow(n,6),Math.pow(1-n,6))}for(let r=0;r<=this.heightMapSize;r++){this.heightMap[r]=[];for(let i=0;i<=this.heightMapSize;i++){let a=t.perlineNoise(i,r),s=(1-Math.max(e[r],e[i]))/n;this.heightMap[r].push(a*s)}}}initGreyRockHeightMap(){this.heightMap=[];let t=[new a.Noisefield(32,1,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295)),new a.Noisefield(16,7,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295)),new a.Noisefield(8,5,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295)),new a.Noisefield(4,3.5,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295)),new a.Noisefield(2,2.5,l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295),l.Random.randi(4294967295))];for(let e=0;e<=this.heightMapSize;e++){this.heightMap[e]=[];for(let n=0;n<=this.heightMapSize;n++){let r=t[0].perlineNoise(n,e)+t[1].perlineNoise(n,e)+t[2].perlineNoise(n,e)+t[3].perlineNoise(n,e)+t[4].perlineNoise(n,e),i=e/this.heightMapSize,a=n/this.heightMapSize,s=(1-Math.max(Math.max(Math.pow(i,6),Math.pow(1-i,6)),Math.max(Math.pow(a,6),Math.pow(1-a,6))))/(1-Math.pow(.5,6));this.heightMap[e].push(r*s)}}}initIcyHeightMap(){let t=[],e=this.heightMapSize/2;for(let n=0;n<200;n++){let n=Math.random()*e,r=Math.random()*e,i=Math.random()*e,a=Math.random()*e,s=Math.max(n,r,i,a),o=Math.random()*Math.PI*2,l=e+Math.cos(o)*s,u=e+Math.sin(o)*s,c=.7*(e-s),h=Math.random()*(c+c)-c;t.push([l,h,u])}this.heightMap=new Array(this.heightMapSize+1);for(let e=0;e<=this.heightMapSize;e++){this.heightMap[e]=new Array(this.heightMapSize+1);for(let n=0;n<=this.heightMapSize;n++){let r=0,i=0;for(let a=0;a<t.length;a++){let s=(t[a][0]-e)*(t[a][0]-e),o=(t[a][2]-n)*(t[a][2]-n),l=Math.sqrt(s+o);i=Math.max(i,t[a][1]-l),r=Math.min(r,t[a][1]+l)}this.heightMap[e][n]=i+r}}}initLeafyHeightMap(){let t=2*Math.random()-1,e=2*Math.random()-1,n=2*Math.random()-1,r=2*Math.random()-1,i=2*Math.random()-1,a=2*Math.random()-1,s=l.Random.randi(7),o=l.Random.randi(7),u=s<o?s:o,c=Math.random()*(2*Math.PI),h=Math.random(),d=Math.random(),m=Math.random();Math.random()>.5&&(h=-h,d=-d,m=-m),this.heightMap=new Array(this.heightMapSize+1);for(let s=0;s<=this.heightMapSize;s++){this.heightMap[s]=new Array(this.heightMapSize+1);for(let o=0;o<=this.heightMapSize;o++){let l=s/this.heightMapSize,f=2*l-1,p=2*(o/this.heightMapSize)-1,_=Math.min(Math.sqrt(f*f+p*p),1),M=Math.atan2(p,f),b=Math.pow(l,4)*(1-l)*12*t+.5*(Math.cos(Math.PI*f)+1)*e+Math.pow(1-l,4)*l*12*n,g=Math.pow(Math.max(1-_,0),2)*r+Math.sin(Math.PI*Math.min(Math.pow(_,.8)*(4/3),1))*i+Math.max(Math.sin(Math.PI*Math.pow(_,1.6)),0)*a,v=4*(Math.sqrt(_)-_)*h+Math.pow(_,2)*Math.pow(1-_,2)*16*d+4*(Math.sqrt(1-_)-(1-_))*m,y=b*g,x=M*u+c,E=.5*(Math.sin(x)+1)*v;this.heightMap[s][o]=5*y+3*E}}}getSpeedFactor(){switch(this.type){case u.RED_ROCK:return 1;case u.LEAFY:return.5;case u.ICY:return.25;case u.SANDY:return.75;case u.GREY_ROCK:return 1}return 1}getAccelFactor(){switch(this.type){case u.RED_ROCK:return 1;case u.LEAFY:return.5;case u.ICY:case u.SANDY:return.25;case u.GREY_ROCK:return 1}return 1}getFriction(){switch(this.type){case u.RED_ROCK:return.005;case u.LEAFY:return 1e-4;case u.ICY:return.5;case u.SANDY:return.2;case u.GREY_ROCK:return.005}return 1e-4}getSlopeFactor(){switch(this.type){case u.RED_ROCK:return.4;case u.LEAFY:return 1;case u.ICY:case u.SANDY:return.2;case u.GREY_ROCK:return.4}return 1}getHeightAtPosition(t,e){let n=(t-this.position[0])*(this.heightMapSize/2)/(this.radius*Math.SQRT1_2)+this.heightMapSize/2,i=(e-this.position[2])*(this.heightMapSize/2)/(this.radius*Math.SQRT1_2)+this.heightMapSize/2;if(n>this.heightMapSize||n<0||i>this.heightMapSize||i<0)return 0;let a,s=Math.floor(n),l=Math.floor(i),u=n-s,c=i-l,h=r.vec3.create(),d=r.vec3.fromValues(s,this.heightMap[s][l],l),m=r.vec3.fromValues(s+1,this.heightMap[s+1][l+1],l+1);u>c?r.vec3.set(h,s+1,this.heightMap[s+1][l],l):r.vec3.set(h,s,this.heightMap[s][l+1],l+1);let f=r.vec2.fromValues(n,i),p=r.vec2.fromValues(h[0],h[2]),_=r.vec2.fromValues(d[0],d[2]),M=r.vec2.fromValues(m[0],m[2]),b=o.MathHelper.barycentric(f,p,_,M);return a=b[0]*h[1]+b[1]*d[1]+b[2]*m[1]}}p.height_map_model_gen_count=0,e.Disk=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.randi=function(t){return Math.floor(Math.random()*Math.floor(t))}}(e.Random||(e.Random={}))},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(22),a=n(3);let s,o=n(59),l=window.document,u=a.global.gl,c=l.getElementById("fpscounter"),h=l.getElementById("score");class d{constructor(){this.fullscreenChange=(t=>{let e=window.document,n=a.global.canvas;e.webkitFullscreenElement!==n&&e.mozFullscreenElement!==n&&e.mozFullScreenElement!==n&&e.fullscreenElement!==n||(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock())}),this.pointerLockChange=(t=>{let e=window.document;e.pointerLockElement===a.global.canvas||e.mozPointerLockElement===a.global.canvas||e.webkitPointerLockElement===a.global.canvas?e.addEventListener("mousemove",this.moveCallback,!1):e.removeEventListener("mousemove",this.moveCallback,!1)}),this.moveCallback=(t=>{let e=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;a.global.mouse_x_total+=e,a.global.mouse_y_total+=n}),a.global.canvas=l.getElementById("canvas"),this.initGL(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(s=!0),this.init()}init(){return r(this,void 0,void 0,function*(){this.game=new i.Game,yield this.game.init(),l.getElementById("loading-container").remove(),this.initPointerLock(),o.setSimulationTimestep(1e3/60),o.setMaxAllowedFPS(1e3),o.setBegin(this.begin.bind(this)).setUpdate(this.update.bind(this)).setDraw(this.draw.bind(this)).setEnd(this.end.bind(this)).start()})}initGL(){try{a.global.gl=a.global.canvas.getContext("webgl2"),u=a.global.gl}catch(t){throw"GL init error:\n"+t}u||alert("WebGL is not available on your browser."),u.enable(u.SAMPLE_COVERAGE),u.sampleCoverage(1,!1),u.clearColor(.2,.3,.3,1),u.enable(u.DEPTH_TEST),u.enable(u.CULL_FACE),u.cullFace(u.BACK),this.resize(),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)}update(t){s&&this.doDemo(t),this.game.update(t)}begin(t,e){this.game.updateAnimations(e)}draw(t){this.game.draw(),this.resize()}end(t,e){if(c.textContent=Math.round(t)+" FPS",h.textContent="Score: "+this.game.getScore(),e){let t=Math.round(o.resetFrameDelta());console.warn("Main loop panicked, probably because the browser tab was put in the background. Discarding "+t+"ms")}}doDemo(t){this.game.doDemo(t)}resize(){a.global.canvas.width=window.innerWidth,a.global.canvas.height=window.innerHeight,u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight)}initPointerLock(){let t=a.global.canvas;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen,t.addEventListener("click",t.requestFullscreen,!1),l.addEventListener("fullscreenchange",this.fullscreenChange,!1),l.addEventListener("mozfullscreenchange",this.fullscreenChange,!1),l.addEventListener("webkitfullscreenchange",this.fullscreenChange,!1),l.addEventListener("pointerlockchange",this.pointerLockChange,!1),l.addEventListener("mozpointerlockchange",this.pointerLockChange,!1),l.addEventListener("webkitpointerlockchange",this.pointerLockChange,!1)}}e.Main=d,window.onkeydown=function(t){a.global.keys[t.keyCode]=!0},window.onkeyup=function(t){a.global.keys[t.keyCode]=!1},window.onmousedown=function(t){a.global.mouse_keys[t.which]=!0},window.onmouseup=function(t){a.global.mouse_keys[t.which]=!1},new d},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(23),a=n(35),s=n(3),o=n(39),l=n(42),u=n(0),c=n(5),h=n(43),d=n(6),m=n(44),f=n(14);let p,_=n(2),M=s.global.gl,b=s.global.keys,g=s.global.mouse_keys;const v=u.vec3.fromValues(0,1.6,0);class y{constructor(){this.ROD_FILENAME="/assets/models/environment/rod/Rod",this.RING_FILENAME="/assets/models/environment/ring/Ring",this.SKYBOX_FILENAME="/assets/models/environment/skybox/Skybox",this.MAPS_FOLDER="../../assets/worlds/maps/",this.player_camera=new l.Camera(u.vec3.fromValues(0,1.6,0),u.vec3.fromValues(0,1,0),0),this.overview_camera=new l.Camera(u.vec3.fromValues(100,200,10),u.vec3.fromValues(0,1,0),0,0),this.active_camera=this.player_camera,this.current_map=0,M=M||s.global.gl,d(M)}init(){return r(this,void 0,void 0,function*(){this.player=new i.Player,yield this.loadAssets(),yield s.global.updateProgressText("Initializing world"),this.ring_model.init(M),this.rod_model.init(M),this.skybox_model.init(M);let t=Date.now();this.world=new a.World(M,y.maps[this.current_map++]),console.log("world gen time: "+(Date.now()-t)/1e3+"s"),this.pickup_manager=new o.PickupManager(this.world,this.rod_model,this.ring_model),this.player.reset(this.world),this.overview_camera.lookAt(u.vec3.fromValues(0,0,0)),this.initRenderer(),this.addAllGameEntitiesToRenderer()})}initRenderer(){let t=new m.BasicModelShader(M,n(46),n(47));p=new h.Renderer(t),s.global.renderer=p,p.addBasicModel(this.world.diskA_model),p.addBasicModel(this.world.diskB_model),p.addBasicModel(this.world.diskC_model),p.addBasicModel(this.world.diskD_model),p.addBasicModel(this.world.diskE_model),p.addBasicModel(this.ring_model),p.addBasicModel(this.rod_model),t.use(),t.setBoolByName("lights[0].is_enabled",!0),t.setVec4ByName("lights[0].position",[.34,.83,.44,0]),t.setVec3ByName("lights[0].ambient",[1.8,1.8,1.8]),t.setVec3ByName("lights[0].diffuse",[1.2,1.2,1.2]),t.setVec3ByName("lights[0].specular",[0,0,0])}addAllGameEntitiesToRenderer(){p.removeAllEntities(),this.world.disks.forEach(t=>{d(t.initialized),p.addEntityToRenderList(t),p.addMeshlessModel(t.heightMapModel),p.addEntityToRenderList(t.heightMapEntity)}),this.pickup_manager.rings.forEach(t=>{t.picked_up||p.addEntityToRenderList(t)}),this.pickup_manager.rods.forEach(t=>{t.picked_up||p.addEntityToRenderList(t)})}updateAnimations(t){this.player.updateAnimation(t)}update(t){b[77]&&(this.destroyIntoNewWorld(),this.addAllGameEntitiesToRenderer(),b[77]=!1);let e=this.world.getAccelFactorAtPosition(this.player.position[0],this.player.position[2],this.player.model.radius),n=!1;b[40]||b[83]?(this.player.accelerateBackward(t,e),n=!0):(b[38]||b[87]||g[1]&&g[3])&&(this.player.accelerateForward(t,e),n=!0),b[65]?(this.player.accelerateLeft(t,e),n=!0):b[68]&&(this.player.accelerateRight(t,e),n=!0),n||this.player.transitionAnimationTo(f.Player_State.Standing),b[37]&&this.player.turnLeft(t),b[39]&&this.player.turnRight(t),b[32]&&this.player.jump(),this.player.update(this.world,t),b[82]&&this.player.reset(this.world),b[79]?this.active_camera=this.overview_camera:this.active_camera=this.player_camera,this.player.rotate(-s.global.mouse_x_total/600),this.player_camera.processMouseMovement(this.player.forward,this.player.position,s.global.mouse_x_total,-s.global.mouse_y_total,!0),s.global.resetMousePosition(),this.world.update(t),this.pickup_manager.update(t),this.pickup_manager.checkForPickupsCylinderIntersection(this.player.position,this.player.model.radius,this.player.model.half_height,p),this.player_camera.front[0]=this.player.forward[0],this.player_camera.front[2]=this.player.forward[2],this.player_camera.up=this.player.up;let r=u.vec3.clone(this.player.position);r[0]-=2*this.player.forward[0],r[2]-=2*this.player.forward[2],u.vec3.add(r,r,v),u.vec3.copy(this.player_camera.position,r)}draw(){M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT);let t=u.vec3.clone(this.active_camera.position),e=u.mat4.create();u.mat4.identity(e);let n=this.active_camera.getViewMatrix();u.mat4.perspective(e,u.glMatrix.toRadian(80),s.global.canvas.clientWidth/s.global.canvas.clientHeight,.1,2e3),p.prepareShader(M);let r=u.mat4.create();M.disable(M.DEPTH_TEST),u.mat4.translate(r,r,this.active_camera.position),p.setMVPMatrices(r,n,e,this.active_camera.position),this.skybox_model.draw(M,p.shader),M.enable(M.DEPTH_TEST),p.render(M,n,e),this.player.draw(M,p.shader,n,e,t)}destroyIntoNewWorld(){this.current_map>=y.maps.length&&(this.current_map=0),this.world.destroy(),this.world.init(M,y.maps[this.current_map++]),this.pickup_manager.init(this.world),this.player.reset(this.world)}getScore(){return this.pickup_manager.getScore()}doDemo(t){let e=this.world.getAccelFactorAtPosition(this.player.position[0],this.player.position[2],this.player.model.radius);this.player.accelerateForward(t/2,e),this.player.rotate(t/5)}loadAssets(){return r(this,void 0,void 0,function*(){let t=Date.now();yield s.global.updateProgressText("Downloading world"),yield a.World.loadAssets(),yield this.loadWorldData(),yield s.global.updateProgressText("Downloading pickups"),yield this.loadPickupModels(),yield s.global.updateProgressText("Downloading skybox"),yield this.loadSkybox(),yield s.global.updateProgressText("Downloading player"),yield this.player.loadAssets();let e=Date.now();console.log("asset download time: "+(e-t)/1e3+"s")})}loadPickupModels(){return r(this,void 0,void 0,function*(){let t=yield _.downloadModels([{name:"Ring",obj:this.RING_FILENAME+".obj",mtl:this.RING_FILENAME+".mtl"}]);this.ring_model=new c.BasicModel(t.Ring),t=yield _.downloadModels([{name:"Rod",obj:this.ROD_FILENAME+".obj",mtl:this.ROD_FILENAME+".mtl"}]),this.rod_model=new c.BasicModel(t.Rod)})}loadWorldData(){return r(this,void 0,void 0,function*(){y.maps=[];let t=n(48);t.keys().forEach(e=>y.maps.push(t(e)))})}loadSkybox(){return r(this,void 0,void 0,function*(){let t=yield _.downloadModels([{name:"Skybox",obj:this.SKYBOX_FILENAME+".obj",mtl:this.SKYBOX_FILENAME+".mtl"}]);this.skybox_model=new c.BasicModel(t.Skybox)})}}e.Game=y},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),a=n(14),s=n(4),o=n(18),l=n(6);var u=o.MathHelper.vec2_rotate;n(2);const c=i.vec3.fromValues(0,.8,0),h=(i.vec3.fromValues(0,0,-1),12),d=8,m=3,f=25,p=10;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(e.Player_Movement||(e.Player_Movement={}));e.Player=class extends s.Entity{constructor(){super("player",s.Model_Type.ANIMATED)}draw(t,e,n,r,a){l(this.loaded);let s=i.mat4.create(),o=i.quat.create();i.quat.rotateY(o,o,Math.atan2(this.forward[0],this.forward[2])-Math.PI/2),i.mat4.fromRotationTranslation(s,o,i.vec3.add(i.vec3.create(),this.position,i.vec3.fromValues(0,.8,0))),this.model.draw(t,e,s,n,r,a)}updateAnimation(t){this.model.updateAnimation(t)}update(t,e){let n=e/1e3,r=i.vec3.clone(this.position),s=i.vec3.clone(this.velocity);i.vec3.scaleAndAdd(s,r,s,n);let o=t.getHeightAtCirclePosition(s[0],s[2],this.model.radius);if(this.jumping){let e=i.vec3.fromValues(0,-9.8,0);i.vec3.scaleAndAdd(this.velocity,this.velocity,e,n),t.isCylinderCollisionWithDisk(i.vec3.add(i.vec3.create(),s,c),this.model.radius,this.model.half_height)&&(t.isCylinderCollisionWithDisk(i.vec3.add(i.vec3.create(),r,c),this.model.radius,this.model.half_height)?(this.jumping=!1,this.model.setState(a.Player_State.Standing),this.velocity[1]=0,s[1]=o):(this.velocity[0]=this.velocity[2]=0,s[0]=r[0],s[2]=r[2]))}else if(t.isOnDisk(s[0],s[2],this.model.radius)){s[1]=o,this.velocity[1]=0;let e=t.getFrictionAtPosition(s[0],s[2]);i.vec3.scale(this.velocity,this.velocity,Math.pow(e,n));let r=t.getSlopeFactorAtPosition(s[0],s[2]),a=s[1],l=s[1],c=i.vec2.create();for(let e=0;e<60;e++){let n=i.vec2.fromValues(1,0);u(n,n,2*Math.PI*(e/60));let r=i.vec3.fromValues(s[0]+.01*n[0],0,s[2]+.01*n[1]),a=t.getHeightAtPointPosition(r[0],r[2]);a<l&&(l=a,c=n)}let h=(a-l)/.01;if(h>r){let t=10*(h-r)*n,e=i.vec3.fromValues(c[0],0,c[1]);i.vec3.scale(e,e,t),this.addAcceleration(e)}}else this.jumping=!0,this.model.setState(a.Player_State.Falling);i.vec3.copy(this.position,s)}reset(t){this.velocity=this.velocity||i.vec3.create();let e=i.vec3.clone(t.disks[0].position);e[1]=t.getHeightAtPointPosition(e[0],e[2]),i.vec3.copy(this.position,e),i.vec3.set(this.velocity,0,0,0),this.jumping=!1}addAcceleration(t){this.jumping||i.vec3.add(this.velocity,this.velocity,t)}jump(){this.jumping||(i.vec3.scaleAndAdd(this.velocity,i.vec3.fromValues(0,h,0),this.forward,d),this.model.setState(a.Player_State.Jumping),this.jumping=!0)}rotate(t){i.vec3.rotateY(this.forward,this.forward,[0,0,0],2*t)}accelerateForward(t,e){let n=i.vec3.clone(this.forward);i.vec3.scale(n,n,f*t/1e3*e),this.addAcceleration(n),this.transitionAnimationTo(a.Player_State.Running)}accelerateBackward(t,e){let n=i.vec3.clone(this.forward);i.vec3.negate(n,n),i.vec3.scale(n,n,f*t/1e3*e),this.addAcceleration(n),this.transitionAnimationTo(a.Player_State.Reversing)}accelerateLeft(t,e){let n=this.getRight();i.vec3.negate(n,n),i.vec3.scale(n,n,p*t/1e3*e),this.addAcceleration(n),this.transitionAnimationTo(a.Player_State.Strafing)}accelerateRight(t,e){let n=this.getRight();i.vec3.scale(n,n,p*t/1e3*e),this.addAcceleration(n),this.transitionAnimationTo(a.Player_State.Strafing)}turnLeft(t){let e=m*t/1e3;i.vec3.rotateY(this.forward,this.forward,this.up,e)}turnRight(t){let e=m*t/1e3;i.vec3.rotateY(this.forward,this.forward,this.up,-e)}transitionAnimationTo(t){this.jumping||this.model.setState(t)}loadAssets(){return r(this,void 0,void 0,function*(){this.model=new a.PlayerModel,yield this.model.load(),this.loaded=!0})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,i){let a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){let n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=n*a-i*r;if(!s)return null;return s=1/s,t[0]=a*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t},e.adjoint=function(t,e){let n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*o,t[1]=i*l+s*o,t[2]=r*-o+a*l,t[3]=i*-o+s*l,t},e.scale=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=n[0],l=n[1];return t[0]=r*o,t[1]=i*o,t[2]=a*l,t[3]=s*l,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-c)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var r=n(1);function i(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*o+a*l,t[1]=i*o+s*l,t[2]=r*u+a*c,t[3]=i*u+s*c,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}const s=i;e.mul=s;const o=a;e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,i,a,s){let o=new r.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o[4]=a,o[5]=s,o},e.set=function(t,e,n,r,i,a,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=n*a-r*i;if(!l)return null;return l=1/l,t[0]=a*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*o-a*s)*l,t[5]=(r*s-n*o)*l,t},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=i*c+s*u,t[2]=r*-u+a*c,t[3]=i*-u+s*c,t[4]=o,t[5]=l,t},e.scale=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r*u,t[1]=i*u,t[2]=a*c,t[3]=s*c,t[4]=o,t[5]=l,t},e.translate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=s,t[4]=r*u+a*c+o,t[5]=i*u+s*c+l,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=e[0],c=e[1],h=e[2],d=e[3],m=e[4],f=e[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-m)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-f)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))};var r=n(1);function i(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=n[0],c=n[1],h=n[2],d=n[3],m=n[4],f=n[5];return t[0]=r*u+a*c,t[1]=i*u+s*c,t[2]=r*h+a*d,t[3]=i*h+s*d,t[4]=r*m+a*f+o,t[5]=i*m+s*f+l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}const s=i;e.mul=s;const o=a;e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(8);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.clone=function(t){let e=new r.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},e.fromValues=function(t,e,n,i,a,s,o,l){let u=new r.ARRAY_TYPE(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=a,u[5]=s,u[6]=o,u[7]=l,u},e.fromRotationTranslationValues=function(t,e,n,i,a,s,o){let l=new r.ARRAY_TYPE(8);l[0]=t,l[1]=e,l[2]=n,l[3]=i;let u=.5*a,c=.5*s,h=.5*o;return l[4]=u*i+c*n-h*e,l[5]=c*i+h*t-u*n,l[6]=h*i+u*e-c*t,l[7]=-u*t-c*e-h*n,l},e.fromRotationTranslation=s,e.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},e.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.fromMat4=function(t,e){let n=i.create();a.getRotation(n,e);let o=new r.ARRAY_TYPE(3);return a.getTranslation(o,e),s(t,n,o),t},e.copy=o,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.set=function(t,e,n,r,i,a,s,o,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=s,t[6]=o,t[7]=l,t},e.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},e.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},e.getTranslation=function(t,e){let n=e[4],r=e[5],i=e[6],a=e[7],s=-e[0],o=-e[1],l=-e[2],u=e[3];return t[0]=2*(n*u+a*s+r*l-i*o),t[1]=2*(r*u+a*o+i*s-n*l),t[2]=2*(i*u+a*l+n*o-r*s),t},e.translate=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=.5*n[0],l=.5*n[1],u=.5*n[2],c=e[4],h=e[5],d=e[6],m=e[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=s,t[4]=s*o+i*u-a*l+c,t[5]=s*l+a*o-r*u+h,t[6]=s*u+r*l-i*o+d,t[7]=-r*o-i*l-a*u+m,t},e.rotateX=function(t,e,n){let r=-e[0],a=-e[1],s=-e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],d=l*o+h*r+u*s-c*a,m=u*o+h*a+c*r-l*s,f=c*o+h*s+l*a-u*r,p=h*o-l*r-u*a-c*s;return i.rotateX(t,e,n),r=t[0],a=t[1],s=t[2],o=t[3],t[4]=d*o+p*r+m*s-f*a,t[5]=m*o+p*a+f*r-d*s,t[6]=f*o+p*s+d*a-m*r,t[7]=p*o-d*r-m*a-f*s,t},e.rotateY=function(t,e,n){let r=-e[0],a=-e[1],s=-e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],d=l*o+h*r+u*s-c*a,m=u*o+h*a+c*r-l*s,f=c*o+h*s+l*a-u*r,p=h*o-l*r-u*a-c*s;return i.rotateY(t,e,n),r=t[0],a=t[1],s=t[2],o=t[3],t[4]=d*o+p*r+m*s-f*a,t[5]=m*o+p*a+f*r-d*s,t[6]=f*o+p*s+d*a-m*r,t[7]=p*o-d*r-m*a-f*s,t},e.rotateZ=function(t,e,n){let r=-e[0],a=-e[1],s=-e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],d=l*o+h*r+u*s-c*a,m=u*o+h*a+c*r-l*s,f=c*o+h*s+l*a-u*r,p=h*o-l*r-u*a-c*s;return i.rotateZ(t,e,n),r=t[0],a=t[1],s=t[2],o=t[3],t[4]=d*o+p*r+m*s-f*a,t[5]=m*o+p*a+f*r-d*s,t[6]=f*o+p*s+d*a-m*r,t[7]=p*o-d*r-m*a-f*s,t},e.rotateByQuatAppend=function(t,e,n){let r=n[0],i=n[1],a=n[2],s=n[3],o=e[0],l=e[1],u=e[2],c=e[3];return t[0]=o*s+c*r+l*a-u*i,t[1]=l*s+c*i+u*r-o*a,t[2]=u*s+c*a+o*i-l*r,t[3]=c*s-o*r-l*i-u*a,o=e[4],l=e[5],u=e[6],c=e[7],t[4]=o*s+c*r+l*a-u*i,t[5]=l*s+c*i+u*r-o*a,t[6]=u*s+c*a+o*i-l*r,t[7]=c*s-o*r-l*i-u*a,t},e.rotateByQuatPrepend=function(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+s*o+i*u-a*l,t[1]=i*c+s*l+a*o-r*u,t[2]=a*c+s*u+r*l-i*o,t[3]=s*c-r*o-i*l-a*u,o=n[4],l=n[5],u=n[6],c=n[7],t[4]=r*c+s*o+i*u-a*l,t[5]=i*c+s*l+a*o-r*u,t[6]=a*c+s*u+r*l-i*o,t[7]=s*c-r*o-i*l-a*u,t},e.rotateAroundAxis=function(t,e,n,i){if(Math.abs(i)<r.EPSILON)return o(t,e);let a=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;let s=Math.sin(i),l=s*n[0]/a,u=s*n[1]/a,c=s*n[2]/a,h=Math.cos(i),d=e[0],m=e[1],f=e[2],p=e[3];t[0]=d*h+p*l+m*c-f*u,t[1]=m*h+p*u+f*l-d*c,t[2]=f*h+p*c+d*u-m*l,t[3]=p*h-d*l-m*u-f*c;let _=e[4],M=e[5],b=e[6],g=e[7];return t[4]=_*h+g*l+M*c-b*u,t[5]=M*h+g*u+b*l-_*c,t[6]=b*h+g*c+_*u-M*l,t[7]=g*h-_*l-M*u-b*c,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},e.multiply=c,e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},e.lerp=function(t,e,n,r){let i=1-r;d(e,n)<0&&(r=-r);return t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t},e.invert=function(t,e){let n=p(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},e.normalize=function(t,e){let n=p(e);n>0&&(n=Math.sqrt(n),t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n,t[3]=e[3]/n,t[4]=e[4]/n,t[5]=e[5]/n,t[6]=e[6]/n,t[7]=e[7]/n);return t},e.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=e[0],d=e[1],m=e[2],f=e[3],p=e[4],_=e[5],M=e[6],b=e[7];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(l-_)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))};var r=n(1),i=n(11),a=n(10);function s(t,e,n){let r=.5*n[0],i=.5*n[1],a=.5*n[2],s=e[0],o=e[1],l=e[2],u=e[3];return t[0]=s,t[1]=o,t[2]=l,t[3]=u,t[4]=r*u+i*l-a*o,t[5]=i*u+a*s-r*l,t[6]=a*u+r*o-i*s,t[7]=-r*s-i*o-a*l,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}const l=i.copy;e.getReal=l;const u=i.copy;function c(t,e,n){let r=e[0],i=e[1],a=e[2],s=e[3],o=n[4],l=n[5],u=n[6],c=n[7],h=e[4],d=e[5],m=e[6],f=e[7],p=n[0],_=n[1],M=n[2],b=n[3];return t[0]=r*b+s*p+i*M-a*_,t[1]=i*b+s*_+a*p-r*M,t[2]=a*b+s*M+r*_-i*p,t[3]=s*b-r*p-i*_-a*M,t[4]=r*c+s*o+i*u-a*l+h*b+f*p+d*M-m*_,t[5]=i*c+s*l+a*o-r*u+d*b+f*_+m*p-h*M,t[6]=a*c+s*u+r*l-i*o+m*b+f*M+h*_-d*p,t[7]=s*c-r*o-i*l-a*u+f*b-h*p-d*_-m*M,t}e.setReal=u;const h=c;e.mul=h;const d=i.dot;e.dot=d;const m=i.length;e.length=m;const f=m;e.len=f;const p=i.squaredLength;e.squaredLength=p;const _=p;e.sqrLen=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=s,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=l,e.squaredDistance=u,e.length=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.rotate=function(t,e,n,r){let i=e[0]-n[0],a=e[1]-n[1],s=Math.sin(r),o=Math.cos(r);return t[0]=i*o-a*s+n[0],t[1]=i*s+a*o+n[1],t},e.angle=function(t,e){let n=t[0],r=t[1],i=e[0],a=e[1],s=n*n+r*r;s>0&&(s=1/Math.sqrt(s));let o=i*i+a*a;o>0&&(o=1/Math.sqrt(o));let l=(n*i+r*a)*s*o;return l>1?0:l<-1?Math.PI:Math.acos(l)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let n=t[0],i=t[1],a=e[0],s=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var r=n(1);function i(){let t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function o(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function c(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function h(t){var e=t[0],n=t[1];return e*e+n*n}const d=c;e.len=d;const m=a;e.sub=m;const f=s;e.mul=f;const p=o;e.div=p;const _=l;e.dist=_;const M=u;e.sqrDist=M;const b=h;e.sqrLen=b;const g=function(){let t=i();return function(e,n,r,i,a,s){let o,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,o=r;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],a(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}();e.forEach=g},function(t,e,n){"use strict";e.d=a,e.c=function(t){s=window.location.href.substr(0,window.location.href.lastIndexOf("/"));const e=[];for(const n of t){const t=[];if(!n.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');let o=n.name;if(!o){let t=n.obj.split("/");o=t[t.length-1].replace(".obj","")}if(t.push(Promise.resolve(o)),t.push(fetch(s+n.obj).then(t=>t.text()).then(t=>new r.a(t))),n.mtl){let e=n.mtl;"boolean"==typeof e&&(e=n.obj.replace(/\.obj$/,".mtl")),t.push(fetch(s+e).then(t=>t.text()).then(t=>{let r=new i.b(t);if(!1!==n.downloadMtlTextures){let t=n.mtlTextureRoot;return t||(t=e.substr(0,e.lastIndexOf("/"))),Promise.all([Promise.resolve(r),a(r,s+t)])}return Promise.all(Promise.resolve(r))}).then(t=>t[0]))}e.push(Promise.all(t))}return Promise.all(e).then(t=>{const e={};for(const n of t){const[t,r,i]=n;r.name=t,i&&r.addMaterialLibrary(i),e[t]=r}return e})},e.b=function(t,e,n){void 0===n&&(n={});const i=[];for(const e in t){if(!t.hasOwnProperty(e))continue;const n=t[e];i.push(fetch(n).then(t=>t.text()).then(t=>[e,new r.a(t)]))}Promise.all(i).then(t=>{for(let[e,r]of t)n[e]=r;return e(n)})},e.e=function(t,e){e.normalBuffer=o(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=o(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=o(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=o(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)},e.a=function(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)};var r=n(15),i=n(16);n(7);function a(t,e){const n=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];e.endsWith("/")||(e+="/");let r=[];for(let i in t.materials){if(!t.materials.hasOwnProperty(i))continue;i=t.materials[i];let a={};for(let t of n){let n=i[t];if(!n)continue;let s=e+n.filename;a.hasOwnProperty(n.filename)?n.texture=a[n.filename]:(a[n.filename]=new Image,r.push(fetch(s).then(t=>{if(!t.ok)throw new Error;return t.blob()}).then(function(t){a[n.filename].src=URL.createObjectURL(t),n.texture=a[n.filename]}).catch(()=>{console.error(`Unable to download texture: ${s}`)})))}}return Promise.all(r)}let s;var o=function(t,e,n,r){var i=t.createBuffer(),a=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,i),t.bufferData(e,new a(n),t.STATIC_DRAW),i.itemSize=r,i.numItems=n.length/r,i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(5),i=n(6);let a=n(2);e.KeyframeInterpModel=class extends r.BasicModel{constructor(t,e,n=0,r=0){i(t.vertices.size==e.vertices.size,"Meshes must have same order of vertices."),super(t,n,r),this.mesh2=e}init(t){super.init(t),a.initMeshBuffers(t,this.mesh2),t.enableVertexAttribArray(3),t.bindBuffer(t.ARRAY_BUFFER,this.mesh2.vertexBuffer),t.vertexAttribPointer(3,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(4),t.bindBuffer(t.ARRAY_BUFFER,this.mesh2.normalBuffer),t.vertexAttribPointer(4,3,t.FLOAT,!1,0,0)}draw(t,e,n=0){this.activateBuffers(t);for(let r in this.mesh.materialsByIndex){let i=parseInt(r),a=this.mesh.vertexBuffer.itemSize,s=this.mesh.submesh[i];this.activateMaterial(t,e,i),this.setTweenFactor(e,n);let o=2;t.drawElements(t.TRIANGLES,a*s.numItems,t.UNSIGNED_SHORT,s.offset*a*o)}t.bindVertexArray(null)}setTweenFactor(t,e){e=Math.max(0,Math.min(e,1)),t.setBoolByName("tween_enabled",!0),t.setFloatByName("tween_factor",e)}}},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!M(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,a=r.length,s=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),l=r[n];n<a;l=r[++n])p(l)||!v(l)?s+=" "+l:s+=" "+o(l);return s},e.deprecate=function(n,i){if(b(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,s={};function o(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),c(r,t,r.depth)}function l(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function u(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return M(i)||(i=c(t,i,r)),i}var a=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(M(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(_(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(t,n);if(a)return a;var s=Object.keys(n),o=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(n);if(0===s.length){if(E(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(g(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(y(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return h(n)}var u,v="",w=!1,R=["{","}"];(m(n)&&(w=!0,R=["[","]"]),E(n))&&(v=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(v=" "+RegExp.prototype.toString.call(n)),y(n)&&(v=" "+Date.prototype.toUTCString.call(n)),x(n)&&(v=" "+h(n)),0!==s.length||w&&0!=n.length?r<0?g(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=w?function(t,e,n,r,i){for(var a=[],s=0,o=e.length;s<o;++s)T(e,String(s))?a.push(d(t,e,n,r,String(s),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(d(t,e,n,r,i,!0))}),a}(t,n,r,o,s):s.map(function(e){return d(t,n,r,o,e,w)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,v,R)):R[0]+v+R[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,r,i,a){var s,o,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),T(r,i)||(s="["+i+"]"),o||(t.seen.indexOf(l.value)<0?(o=p(n)?c(t,l.value,null):c(t,l.value,n-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),b(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function m(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function p(t){return null===t}function _(t){return"number"==typeof t}function M(t){return"string"==typeof t}function b(t){return void 0===t}function g(t){return v(t)&&"[object RegExp]"===w(t)}function v(t){return"object"==typeof t&&null!==t}function y(t){return v(t)&&"[object Date]"===w(t)}function x(t){return v(t)&&("[object Error]"===w(t)||t instanceof Error)}function E(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(b(a)&&(a=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var n=r.pid;s[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else s[t]=function(){};return s[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=m,e.isBoolean=f,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=M,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=g,e.isObject=v,e.isDate=y,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(32);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(33),e._extend=function(t,e){if(!e||!v(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(17),n(31))},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&m())}function m(){if(!c){var t=o(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||o(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Guid=class{static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}l((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=n(19),a=n(2),s=n(8),o=n(20),l=n(5);let u=n(2);class c{constructor(t,e){if(this.disks=[],!c.loaded)throw"World loadAssets must be called before constructor.";c.world_meshes.DiskA.addMaterialLibrary(c.world_mat_lib),c.world_meshes.DiskB.addMaterialLibrary(c.world_mat_lib),c.world_meshes.DiskC.addMaterialLibrary(c.world_mat_lib),c.world_meshes.DiskD.addMaterialLibrary(c.world_mat_lib),c.world_meshes.DiskE.addMaterialLibrary(c.world_mat_lib),this.diskA_model=new l.BasicModel(c.world_meshes.DiskA),this.diskB_model=new l.BasicModel(c.world_meshes.DiskB),this.diskC_model=new l.BasicModel(c.world_meshes.DiskC),this.diskD_model=new l.BasicModel(c.world_meshes.DiskD),this.diskE_model=new l.BasicModel(c.world_meshes.DiskE),this.diskA_model.init(t),this.diskB_model.init(t),this.diskC_model.init(t),this.diskD_model.init(t),this.diskE_model.init(t),this.init(t,e)}init(t,e){let n=Date.now();const r=e.split("\n");-1==r[0].indexOf("version 1")&&console.warn("Can't read Disk World File"),this.world_radius=parseInt(r[1]);let a=parseInt(r[2]);r.splice(0,3);for(let e=0;e<a;e++){let n=r[e].split("\t"),a=parseFloat(n[0]),s=parseFloat(n[1]),o=parseFloat(n[2]),l=null,u=null;switch(!0){case o<8:l=this.diskA_model,u=i.Terrain.RED_ROCK;break;case o<=12:l=this.diskB_model,u=i.Terrain.LEAFY;break;case o<=20:l=this.diskC_model,u=i.Terrain.ICY;break;case o<=30:l=this.diskD_model,u=i.Terrain.SANDY;break;case o>30:l=this.diskE_model,u=i.Terrain.GREY_ROCK}if(!l)throw"No Disk Model found for radius: "+o;let c=new i.Disk(l,u,o,a,0,s);c.init(t),this.disks.push(c)}console.log("world gen time: "+(Date.now()-n)/1e3+"s")}destroy(){this.disks=[]}update(t){}getSpeedFactorAtPosition(t,e,n=0){for(let r=0;r<this.disks.length;r++)if(s.Collision.circleIntersection(t,e,n,this.disks[r].position[0],this.disks[r].position[2],this.disks[r].radius))return this.disks[r].getSpeedFactor();return 1}getAccelFactorAtPosition(t,e,n=0){for(let r=0;r<this.disks.length;r++)if(s.Collision.circleIntersection(t,e,n,this.disks[r].position[0],this.disks[r].position[2],this.disks[r].radius))return this.disks[r].getAccelFactor();return 1}getRandomDiskPosition(){if(0===this.disks.length)throw"There are no disks???";let t=o.Random.randi(this.disks.length-1);return this.disks[t].position}getHeightAtPointPosition(t,e){return this.getHeightAtCirclePosition(t,e,0)}getHeightAtCirclePosition(t,e,n){for(let r=0;r<this.disks.length;r++)if(s.Collision.circleIntersection(t,e,n,this.disks[r].position[0],this.disks[r].position[2],this.disks[r].radius))return this.disks[r].getHeightAtPosition(t,e);return 0}getSlopeFactorAtPosition(t,e){for(let n of this.disks)if(s.Collision.circleIntersection(t,e,0,n.position[0],n.position[2],n.radius))return n.getSlopeFactor();return 1e-4}getFrictionAtPosition(t,e){for(let n of this.disks)if(s.Collision.circleIntersection(t,e,0,n.position[0],n.position[2],n.radius))return n.getFriction();return 1e-4}isOnDisk(t,e,n=0){for(let r of this.disks)if(s.Collision.circleIntersection(t,e,n,r.position[0],r.position[2],r.radius))return!0}isCylinderCollisionWithDisk(t,e,n){for(let r of this.disks)if(s.Collision.circleIntersection(t[0],t[2],e,r.position[0],r.position[2],r.radius)){let e=this.getHeightAtPointPosition(t[0],t[2]);if(t[1]-n<=e)return!0}return!1}static loadAssets(){return r(this,void 0,void 0,function*(){this.world_meshes=yield this.loadWorldMeshes(),this.world_mat_lib=yield this.loadWorldMat(),this.loaded=!0})}static loadWorldMeshes(){return r(this,void 0,void 0,function*(){return u.downloadModels([{name:"DiskA",obj:"/assets/models/environment/disks/DiskA.obj",downloadMtlTextures:!1},{name:"DiskB",obj:"/assets/models/environment/disks/DiskB.obj",downloadMtlTextures:!1},{name:"DiskC",obj:"/assets/models/environment/disks/DiskC.obj",downloadMtlTextures:!1},{name:"DiskD",obj:"/assets/models/environment/disks/DiskD.obj",downloadMtlTextures:!1},{name:"DiskE",obj:"/assets/models/environment/disks/DiskE.obj",downloadMtlTextures:!1}])})}static loadWorldMat(){return r(this,void 0,void 0,function*(){let t=new a.MaterialLibrary(n(38));return yield u.downloadMtlTextures(t,window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/assets/models/environment/disks/"),t})}}e.World=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(19);e.MeshlessModel=class{constructor(t,e,n){this.data=t,this.indices=e,this.stride=8,this.name="height_map_model_"+r.Disk.height_map_model_gen_count,this.material=n,this.rotation_offset=0}init(t){this.VAO=t.createVertexArray(),this.buffer=t.createBuffer(),this.index_buffer=t.createBuffer(),t.bindVertexArray(this.VAO),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.data,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.index_buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,4*this.stride,0),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,2,t.FLOAT,!0,4*this.stride,12),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,3,t.FLOAT,!0,4*this.stride,20),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),this.texture=this.material.mapDiffuse.texture_id,this.initialized=!0}activateBuffers(t){t.bindVertexArray(this.VAO),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.index_buffer)}activateMaterial(t,e){this.material.isTextureActive[0]&&this.material.mapTransparency.texture_id&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.material.mapTransparency.texture_id)),this.material.isTextureActive[1]&&this.material.mapEmissive.texture_id&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.material.mapEmissive.texture_id)),this.material.isTextureActive[2]&&this.material.mapAmbient.texture_id&&(t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,this.material.mapAmbient.texture_id)),this.material.isTextureActive[3]&&this.material.mapDiffuse.texture_id&&(t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,this.material.mapDiffuse.texture_id)),this.material.isTextureActive[4]&&this.material.mapSpecular.texture_id&&(t.activeTexture(t.TEXTURE4),t.bindTexture(t.TEXTURE_2D,this.material.mapSpecular.texture_id)),this.material.isTextureActive[5]&&this.material.mapSpecularExponent.texture_id&&(t.activeTexture(t.TEXTURE5),t.bindTexture(t.TEXTURE_2D,this.material.mapSpecularExponent.texture_id)),e.setFloat(e.uniforms.material_transparency,this.material.transparency),e.setVec3(e.uniforms.material_ambient_colour,this.material.ambient),e.setVec3(e.uniforms.material_diffuse_colour,this.material.diffuse),e.setVec3(e.uniforms.material_specular_colour,this.material.specular),e.setVec3(e.uniforms.material_emissive_colour,this.material.emissive),e.setFloat(e.uniforms.material_shininess,this.material.specularExponent),e.setIntV(e.uniforms.material_is_texture_active,this.material.isTextureActive)}draw(t,e){this.activateBuffers(t),this.activateMaterial(t,e),this.drawActivatedMaterial(t)}drawActivatedMaterial(t){t.drawElements(t.TRIANGLES,this.indices.length,t.UNSIGNED_SHORT,0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Noisefield=class{constructor(t,e,n,r,i,a,s,o,l){this.GRID_SIZE=t,this.amplitude=e,this.SEED_X1=n,this.SEED_X2=r,this.SEED_Y1=i,this.SEED_Y2=a,this.SEED_Q0=s,this.SEED_Q1=o,this.SEED_Q2=l}pseudorandom(t,e){let n=this.SEED_X1*t+this.SEED_Y1*e;return this.SEED_Q2*n*n+this.SEED_Q1*n+this.SEED_Q0+this.SEED_X2*t+this.SEED_Y2*e}fade(t){return t*t*t*t*t*6-t*t*t*t*15+t*t*t*10}lattice(t,e){let n=2*this.pseudorandom(t,e)*Math.PI;return{x:Math.cos(n),y:Math.sin(n)}}perlineNoise(t,e){let n=Math.floor(t/this.GRID_SIZE),r=Math.floor(e/this.GRID_SIZE),i=t/this.GRID_SIZE-n,a=e/this.GRID_SIZE-r,s=n+1,o=r+1,l=this.lattice(n,r),u=this.lattice(n,o),c=this.lattice(s,r),h=this.lattice(s,o),d={x:-i,y:-a},m={x:-i,y:1-a},f={x:1-i,y:-a},p={x:1-i,y:1-a},_=this.dotProduct(l,d),M=this.dotProduct(u,m),b=this.dotProduct(c,f),g=this.dotProduct(h,p),v=this.fade(i),y=this.fade(a),x=1-y;return((_*x+M*y)*(1-v)+(b*x+g*y)*v)*this.amplitude}dotProduct(t,e){return t.x*e.x+t.y*e.y}}},function(t,e){t.exports="#\r\n#  Disks.mtl\r\n#\r\n\r\nnewmtl diskA\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskA.jpg\r\nmap_Ka DiskA.jpg\r\n\r\nnewmtl diskA_side\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskA_side.jpg\r\nmap_Ka DiskA_side.jpg\r\n\r\nnewmtl diskB\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskB.jpg\r\nmap_Ka DiskB.jpg\r\n\r\nnewmtl diskB_side\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskB_side.jpg\r\nmap_Ka DiskB_side.jpg\r\n\r\nnewmtl diskC\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskC.jpg\r\nmap_Ka DiskC.jpg\r\n\r\n\r\nnewmtl diskC_side\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskC_side.jpg\r\nmap_Ka DiskC_side.jpg\r\n\r\nnewmtl diskD\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nKs 0.0 0.0 0.0\r\nmap_Kd DiskD.jpg\r\nmap_Ka DiskD.jpg\r\n\r\nnewmtl diskD_side\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskD_side.jpg\r\nmap_Ka DiskD_side.jpg\r\n\r\nnewmtl diskE\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskE.jpg\r\nmap_Ka DiskE.jpg\r\n\r\nnewmtl diskE_side\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd DiskE_side.jpg\r\nmap_Ka DiskE_side.jpg\r\n\r\nnewmtl flat_black\r\nillum 0\r\nKd 0.00 0.00 0.00\r\nKa 0.00 0.00 0.00\r\n\r\nnewmtl rainbow\r\nillum 1\r\nKd 0.80 0.80 0.80\r\nKa 0.20 0.20 0.20\r\nmap_Kd Rainbow.jpg\r\nmap_Ka Rainbow.jpg\r\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(40),i=n(41),a=n(0),s=n(8);e.PickupManager=class{constructor(t,e,n){this.rod_model=e,this.ring_model=n,this.init(t)}init(t){this.score=0,this.rings=[],this.rods=[],t.disks.forEach(e=>{let n=a.vec3.clone(e.position);n[1]=t.getHeightAtPointPosition(n[0],n[2]),this.addRod(n,e.type+1),this.addRing(t,n)})}update(t){this.rings.forEach(e=>{e.picked_up||e.update(t)})}checkForPickupsCylinderIntersection(t,e,n,a){this.rings.forEach(i=>{i.picked_up||s.Collision.cylinderIntersection(t,e,n,i.position,r.Ring.radius,r.Ring.half_height)&&(i.picked_up=!0,this.score+=r.Ring.point_value,a.removeEntity(i))}),this.rods.forEach(r=>{r.picked_up||s.Collision.cylinderIntersection(t,e,n,r.position,i.Rod.radius,i.Rod.half_height)&&(r.picked_up=!0,this.score+=r.point_value,a.removeEntity(r))})}addRod(t,e){this.rods.push(new i.Rod(this.rod_model,t,e))}addRing(t,e){this.rings.push(new r.Ring(this.rings.length,t,this.ring_model,e))}getScore(){return this.score}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(0),a=n(8);class s extends r.Entity{constructor(t,e,n,i){super(n.mesh.name,r.Model_Type.BASIC,i),this.picked_up=!1,this.target_position=i,this.world=e}update(t){let e=i.vec3.create();i.vec3.sub(e,this.target_position,this.position),i.vec3.normalize(e,e);let n=this.world.getSpeedFactorAtPosition(this.position[0],this.position[2])/1e3,r=s.speed*t*n;i.vec3.scaleAndAdd(this.position,this.position,e,r);let o=s.rotation_speed*r;i.vec3.rotateY(this.forward,this.forward,i.vec3.create(),o),this.position[1]=this.world.getHeightAtCirclePosition(this.position[0],this.position[2],s.radius)+2*s.half_height,a.Collision.pointCircleIntersection(this.target_position[0],this.target_position[2],this.position[0],this.position[2],s.radius)&&(this.target_position=this.world.getRandomDiskPosition())}}s.point_value=1,s.speed=2.5,s.rotation_speed=1.3,s.radius=.7,s.half_height=.1,e.Ring=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4);class i extends r.Entity{constructor(t,e,n){super(t.mesh.name,r.Model_Type.BASIC,e),this.picked_up=!1,this.position=e,this.point_value=n}update(t){}}i.radius=.1,i.half_height=1,e.Rod=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),i=90,a=0,s=20,o=.1,l=65;var u;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(u=e.Camera_Movement||(e.Camera_Movement={}));e.Camera=class{constructor(t=r.vec3.fromValues(0,0,0),e=r.vec3.fromValues(0,1,0),n=i,u=a){this.position=t,this.front=r.vec3.fromValues(0,0,-1),this.worldUp=e,this.movementSpeed=s,this.mouseSensitivity=o,this.zoom=l,this.yaw=n,this.pitch=u,this.updateCameraVectors()}getViewMatrix(){let t=r.vec3.create();r.vec3.add(t,this.position,this.front);let e=r.mat4.create();return r.mat4.lookAt(e,this.position,t,this.up),e}lookAt(t){let e=r.vec3.create();r.vec3.subtract(e,t,this.position),r.vec3.normalize(e,e),this.front=e}getInverseViewMatrix(){let t=r.vec3.create();r.vec3.add(t,this.position,this.front);let e=r.mat4.create();return r.mat4.lookAt(e,this.position,t,this.up),r.mat4.invert(e,e),e}processKeyboard(t,e){let n=this.movementSpeed*e,i=this.front,a=this.right;if(t==u.FORWARD){let t=r.vec3.create();r.vec3.scale(t,i,n),r.vec3.add(this.position,this.position,t)}if(t==u.BACKWARD){let t=r.vec3.create();r.vec3.scale(t,i,-n),r.vec3.add(this.position,this.position,t)}if(t==u.LEFT){let t=r.vec3.create();r.vec3.scale(t,a,-n),r.vec3.add(this.position,this.position,t)}if(t==u.RIGHT){let t=r.vec3.create();r.vec3.scale(t,a,n),r.vec3.add(this.position,this.position,t)}}processMouseMovement(t,e,n,r,i=!0){this.mouseSensitivity,r*=this.mouseSensitivity,this.pitch+=r;let a=Math.atan2(t[0],t[2]);a+=Math.PI,a=360-(a*=360/(2*Math.PI))-90,i&&(this.pitch>20&&(this.pitch=20),this.pitch<-20&&(this.pitch=-20),this.yaw>a+0&&(this.yaw=a+0),this.yaw<a-0&&(this.yaw=a-0)),this.updateCameraVectors()}updateCameraVectors(){let t=Math.cos(r.glMatrix.toRadian(this.yaw))*Math.cos(r.glMatrix.toRadian(this.pitch)),e=Math.sin(r.glMatrix.toRadian(this.pitch)),n=Math.sin(r.glMatrix.toRadian(this.yaw))*Math.cos(r.glMatrix.toRadian(this.pitch)),i=r.vec3.fromValues(t,e,n);r.vec3.normalize(i,i),this.front=i;let a=r.vec3.create();r.vec3.normalize(a,r.vec3.cross(a,this.front,this.worldUp)),this.right=a;let s=r.vec3.create();r.vec3.normalize(s,r.vec3.cross(s,this.right,this.front)),this.up=s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(4),i=n(0),a=n(3),s=n(6);let o;e.Renderer=class{constructor(t){this.models=new Map,this.materials=new Map,this.entities=new Map,this.meshless_models=new Map,o=a.global.gl,s(o),this.shader=t}setShader(t){this.shader=t}addBasicModel(t){void 0===this.models.get(t.mesh.name)&&this.models.set(t.mesh.name,t);for(let e in t.mesh.materialNames)if(t.mesh.materialNames.hasOwnProperty(e)&&void 0===this.materials.get(t.mesh.materialNames[e])){if(void 0===t.mesh.materialsByIndex[e])throw"Missing material on model";this.materials.set(t.mesh.materialNames[e],t.mesh.materialsByIndex[e])}}addMeshlessModel(t){void 0===this.meshless_models.get(t.name)&&this.meshless_models.set(t.name,t),void 0===this.materials.get(t.material.name)&&this.materials.set(t.material.name,t.material)}addEntityToRenderList(t){void 0===this.entities.get(t.id)&&this.entities.set(t.id,t),t.model_type==r.Model_Type.BASIC?void 0===this.models.get(t.mesh_name)&&console.log("Basic Model Missing: "+t.mesh_name):t.model_type==r.Model_Type.MESHLESS&&void 0===this.meshless_models.get(t.mesh_name)&&console.log("Meshless Model Missing: "+t.mesh_name)}removeEntity(t){this.entities.delete(t.id)}removeAllEntities(){this.entities=new Map}prepareShader(t){this.shader.prepare(t)}setMVPMatrices(t,e,n,r=i.vec3.fromValues(0,0,0)){this.shader.setMVPMatrices(t,e,n,r)}render(t,e,n){this.prepareShader(t),this.renderMeshlessModels(t,e,n),this.renderBasicModels(t,e,n)}renderMeshlessModels(t,e,n){let a=[];for(const[t,e]of this.meshless_models.entries())a.indexOf(e.material.name)<0&&a.push(e.material.name);for(let s=0;s<a.length;s++){let o=!1;for(const[l,u]of this.meshless_models.entries()){if(u.material.name!==a[s])continue;let l=[];for(const[t,e]of this.entities.entries())e.model_type==r.Model_Type.MESHLESS&&u.name==e.mesh_name&&l.push(e);if(l.length>0){u.activateBuffers(t),o||(this.shader.activateMaterial(t,u.material),o=!0);for(let r=0;r<l.length;r++){let a=i.mat4.create(),s=i.quat.create();i.quat.rotateY(s,s,Math.atan2(l[r].forward[0],l[r].forward[2])+u.rotation_offset),i.mat4.fromRotationTranslationScale(a,s,l[r].position,l[r].scalar),this.shader.setMVPMatrices(a,e,n),u.drawActivatedMaterial(t)}}}}}renderBasicModels(t,e,n){let a=[];for(const[t,e]of this.models.entries())for(const t in e.mesh.materialNames)a.indexOf(e.mesh.materialsByIndex[t].name)<0&&a.push(e.mesh.materialsByIndex[t].name);for(let s=0;s<a.length;s++){let o=!1;for(const[l,u]of this.models.entries()){if(void 0===u.mesh.materialIndices[a[s]])continue;let l=[];for(const[t,e]of this.entities.entries())e.model_type==r.Model_Type.BASIC&&u.mesh.name==e.mesh_name&&l.push(e);if(0==l.length)continue;let c=u.mesh.materialIndices[a[s]];o||(this.shader.activateMaterial(t,u.mesh.materialsByIndex[c]),o=!0),u.activateBuffers(t);for(let r=0;r<l.length;r++){let a=i.mat4.create(),s=i.quat.create();i.quat.rotateY(s,s,Math.atan2(l[r].forward[0],l[r].forward[2])+u.rotation_offset),i.mat4.fromRotationTranslationScale(a,s,i.vec3.add(i.vec3.create(),l[r].position,i.vec3.fromValues(0,u.half_height,0)),l[r].scalar),this.shader.setMVPMatrices(a,e,n),u.drawActivatedMaterial(t,c)}}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(45),i=n(3);class a extends r.Uniforms{}e.BasicModelShader=class extends r.Shader{constructor(t,e,n){if(super(t,e,n),this.use(),this.uniforms=new a,this.uniforms.model_matrix=this.getUniformLocation("model_matrix"),this.uniforms.view_matrix=this.getUniformLocation("view_matrix"),this.uniforms.model_view_projection_matrix=this.getUniformLocation("model_view_projection_matrix"),this.uniforms.camera_pos=this.getUniformLocation("camera_pos"),this.uniforms.tween_enabled=this.getUniformLocation("tween_enabled"),this.uniforms.tween_factor=this.getUniformLocation("tween_factor"),this.uniforms.material_transparency_texture=this.getUniformLocation("material.transparency_texture"),this.uniforms.material_emission_texture=this.getUniformLocation("material.emission_texture"),this.uniforms.material_ambient_texture=this.getUniformLocation("material.ambient_texture"),this.uniforms.material_diffuse_texture=this.getUniformLocation("material.diffuse_texture"),this.uniforms.material_specular_texture=this.getUniformLocation("material.specular_texture"),this.uniforms.material_shininess_texture=this.getUniformLocation("material.shininess_texture"),this.uniforms.material_transparency_channel=this.getUniformLocation("material.transparency_channel"),this.uniforms.material_shininess_channel=this.getUniformLocation("material.shininess_channel"),this.uniforms.material_transparency=this.getUniformLocation("material.transparency"),this.uniforms.material_ambient_colour=this.getUniformLocation("material.ambient_colour"),this.uniforms.material_diffuse_colour=this.getUniformLocation("material.diffuse_colour"),this.uniforms.material_specular_colour=this.getUniformLocation("material.specular_colour"),this.uniforms.material_emissive_colour=this.getUniformLocation("material.emission_colour"),this.uniforms.material_shininess=this.getUniformLocation("material.shininess"),this.uniforms.material_is_texture_active=this.getUniformLocation("material.is_texture_active"),t.bindAttribLocation(this.ID,0,"a_vertex"),t.bindAttribLocation(this.ID,1,"a_tex_coord"),t.bindAttribLocation(this.ID,2,"a_normal"),t.bindAttribLocation(this.ID,3,"a_vertex1"),t.bindAttribLocation(this.ID,4,"a_normal1"),this.setInt(this.uniforms.material_transparency_texture,0),this.setInt(this.uniforms.material_emission_texture,1),this.setInt(this.uniforms.material_ambient_texture,2),this.setInt(this.uniforms.material_diffuse_texture,3),this.setInt(this.uniforms.material_specular_texture,4),this.setInt(this.uniforms.material_shininess_texture,5),!i.global.EMPTY_TEXTURE){t.bindVertexArray(null),i.global.EMPTY_TEXTURE=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT);const e=new Uint8Array([192,192,192,255]);t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,e)}}prepare(t){this.use(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.activeTexture(t.TEXTURE4),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),t.activeTexture(t.TEXTURE5),t.bindTexture(t.TEXTURE_2D,i.global.EMPTY_TEXTURE),this.setBool(this.uniforms.tween_enabled,!1)}activateMaterial(t,e){e.isTextureActive[0]&&e.mapTransparency.texture_id&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.mapTransparency.texture_id)),e.isTextureActive[1]&&e.mapEmissive.texture_id&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,e.mapEmissive.texture_id)),e.isTextureActive[2]&&e.mapAmbient.texture_id&&(t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,e.mapAmbient.texture_id)),e.isTextureActive[3]&&e.mapDiffuse.texture_id&&(t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,e.mapDiffuse.texture_id)),e.isTextureActive[4]&&e.mapSpecular.texture_id&&(t.activeTexture(t.TEXTURE4),t.bindTexture(t.TEXTURE_2D,e.mapSpecular.texture_id)),e.isTextureActive[5]&&e.mapSpecularExponent.texture_id&&(t.activeTexture(t.TEXTURE5),t.bindTexture(t.TEXTURE_2D,e.mapSpecularExponent.texture_id)),this.setFloat(this.uniforms.material_transparency,e.transparency),this.setVec3(this.uniforms.material_ambient_colour,e.ambient),this.setVec3(this.uniforms.material_diffuse_colour,e.diffuse),this.setVec3(this.uniforms.material_specular_colour,e.specular),this.setVec3(this.uniforms.material_emissive_colour,e.emissive),this.setInt(this.uniforms.material_transparency_channel,0),this.setInt(this.uniforms.material_shininess_channel,0),this.setFloat(this.uniforms.material_shininess,e.specularExponent),this.setIntV(this.uniforms.material_is_texture_active,e.isTextureActive)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);class i{}e.Uniforms=i;function a(t,e,n){let r;return r=t.createShader(n),t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(t.getShaderInfoLog(r)),null)}e.Shader=class{constructor(t,e,n){this.gl=t;let r=a(t,e,t.VERTEX_SHADER),s=a(t,n,t.FRAGMENT_SHADER);this.ID=t.createProgram(),t.attachShader(this.ID,r),t.attachShader(this.ID,s),t.linkProgram(this.ID),t.getProgramParameter(this.ID,t.LINK_STATUS)||alert("Could not initialize shaders"),this.uniforms=new i,this.uniforms.model_matrix=this.getUniformLocation("model_matrix"),this.uniforms.view_matrix=this.getUniformLocation("view_matrix"),this.uniforms.model_view_projection_matrix=this.getUniformLocation("model_view_projection_matrix"),this.uniforms.camera_pos=this.getUniformLocation("camera_pos")}use(){this.gl.useProgram(this.ID)}prepare(t){this.use()}activateMaterial(t,e){}setMVPMatrices(t,e,n,i=r.vec3.fromValues(0,0,0)){let a=r.mat4.create();r.mat4.mul(a,e,t),r.mat4.mul(a,n,a),this.setMat4(this.uniforms.model_matrix,t),this.setMat4(this.uniforms.model_view_projection_matrix,a),this.setVec3(this.uniforms.camera_pos,i)}setBoolByName(t,e){this.gl.uniform1i(this.getUniformLocation(t),e?1:0)}setBool(t,e){this.gl.uniform1i(t,e?1:0)}setInt(t,e){this.gl.uniform1i(t,e)}setIntByName(t,e){this.gl.uniform1i(this.getUniformLocation(t),e)}setIntV(t,e){this.gl.uniform1iv(t,e)}setIntVByName(t,e){this.gl.uniform1iv(this.getUniformLocation(t),e)}setFloat(t,e){this.gl.uniform1f(t,e)}setFloatByName(t,e){this.gl.uniform1f(this.getUniformLocation(t),e)}getUniformLocation(t){return this.gl.getUniformLocation(this.ID,t)}setMat4(t,e){this.gl.uniformMatrix4fv(t,!1,e)}setMat4ByName(t,e){this.gl.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}setVec3(t,e){this.gl.uniform3fv(t,e)}setVec3ByName(t,e){this.gl.uniform3fv(this.getUniformLocation(t),e)}setVec4(t,e){this.gl.uniform4fv(t,e)}setVec4ByName(t,e){this.gl.uniform4fv(this.getUniformLocation(t),e)}}},function(t,e){t.exports="#version 300 es\r\n\r\nuniform mat4 model_matrix;\r\nuniform mat4 view_matrix;\r\nuniform mat4 model_view_projection_matrix;\r\nuniform vec3 camera_pos;\r\n\r\nuniform bool tween_enabled;\r\nuniform float tween_factor;\r\n\r\nlayout (location = 0) in vec3 a_vertex;\r\nlayout (location = 1) in vec2 a_tex_coord;\r\nlayout (location = 2) in vec3 a_normal;\r\nlayout (location = 3) in vec3 a_vertex1;\r\nlayout (location = 4) in vec3 a_normal1;\r\n\r\nout vec3 position;\r\nout vec2 tex_coord;\r\nout vec3 normal;\r\nout vec3 to_camera;\r\n\r\nvoid main()\r\n{\r\n    vec3 new_normal = a_normal;\r\n    vec3 new_vertex = a_vertex;\r\n    if(tween_enabled)\r\n\t{\r\n\t\tnew_normal = mix(a_normal,a_normal1,tween_factor);      \r\n        new_vertex = mix(a_vertex,a_vertex1,tween_factor);\r\n        \r\n    }\r\n\t\r\n\tvec4 world_position = model_matrix * vec4(new_vertex, 1.0);\r\n\r\n\tposition   = world_position.xyz;\r\n\ttex_coord = a_tex_coord;\r\n\tnormal    = mat3(transpose(inverse(model_matrix))) * new_normal;\r\n\tto_camera  = normalize(camera_pos - world_position.xyz);\r\n\r\n\tgl_Position = model_view_projection_matrix * vec4(new_vertex, 1.0);\r\n}\r\n"},function(t,e){t.exports="#version 300 es\r\nprecision mediump  float;\r\n\r\nconst int LIGHT_COUNT = 8;\r\n\r\nstruct Material {\r\n\r\n    //Textures\r\n    bool is_texture_active[6];\r\n    sampler2D transparency_texture;\r\n    sampler2D emission_texture;\r\n    sampler2D ambient_texture;\r\n    sampler2D diffuse_texture;\r\n    sampler2D specular_texture;\r\n    sampler2D shininess_texture;\r\n            \r\n    //Colors\r\n    float transparency;\r\n    vec3 emission_colour;\r\n    vec3 ambient_colour;\r\n    vec3 diffuse_colour;\r\n    vec3 specular_colour;\r\n    float shininess;\r\n    int transparency_channel;\r\n    int shininess_channel;\r\n\r\n}; \r\nuniform Material material;\r\n\r\n\r\nstruct Light{\r\n    bool is_enabled;\r\n    vec4 position;\r\n    vec3 ambient;\r\n    vec3 diffuse;\r\n    vec3 specular;\r\n    vec3 attenuation;\r\n};\r\n\r\nuniform Light lights[LIGHT_COUNT];\r\n\r\nin vec3 position;\r\nin vec2 tex_coord;\r\nin vec3 normal;\r\nin vec3 to_camera;\r\n\r\nout vec4 FragColor;\r\n\r\nvoid main()\r\n{\r\n\r\n\r\n\tvec3 normalized_normal    = normalize(normal);\r\n\tvec3 normalized_to_camera = normalize(to_camera);\r\n\r\n\tfloat transparency_on_texture = texture(material.transparency_texture, tex_coord)[material.transparency_channel];\r\n\tvec3      emission_on_texture = texture(    material.emission_texture, tex_coord).rgb;\r\n\tvec3       ambient_on_texture = texture(     material.ambient_texture, tex_coord).rgb;\r\n\tvec3       diffuse_on_texture = texture(     material.diffuse_texture, tex_coord).rgb;\r\n\tvec3      specular_on_texture = texture(    material.specular_texture, tex_coord).rgb;\r\n\tfloat    shininess_on_texture = texture(   material.shininess_texture, tex_coord)[material.shininess_channel];\r\n\r\n\tfloat transparency2    = material.transparency;\r\n\tvec3  emission_surface = material.emission_colour;\r\n\tvec3   ambient_surface =  material.ambient_colour;\r\n\tvec3   diffuse_surface =  material.diffuse_colour;\r\n\tvec3  specular_surface = material.specular_colour;\r\n\tfloat shininess2       = material.shininess;\r\n\r\n\tif(material.is_texture_active[0]) transparency2    *= transparency_on_texture;\r\n\tif(material.is_texture_active[1]) emission_surface *=     emission_on_texture;\r\n\tif(material.is_texture_active[2])  ambient_surface *=      ambient_on_texture;\r\n\tif(material.is_texture_active[3])  diffuse_surface *=      diffuse_on_texture;\r\n\tif(material.is_texture_active[4]) specular_surface *=     specular_on_texture;\r\n\tif(material.is_texture_active[5]) shininess2       *=    shininess_on_texture;\r\n\r\n\tvec3 basic_colour      = emission_surface;\r\n\tvec4 separate_specular = vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n\t// calculate the effects of each light\r\n\r\n\tfor(int i = 0; i < LIGHT_COUNT; i++)\r\n\t\tif(lights[i].is_enabled)\r\n\t\t{\r\n\t\t\tvec3 light_direction_from;\r\n\t\t\tfloat attenuation = 1.0;\r\n\t\t\tif(lights[i].position.w == 0.0)\r\n\t\t\t\tlight_direction_from = normalize(lights[i].position.xyz);\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvec3 offset_position = lights[i].position.xyz - position;\r\n\t\t\t\tlight_direction_from = normalize(offset_position);\r\n\t\t\t\tfloat light_distance = length(offset_position);\r\n\t\t\t\tattenuation = 1.0 / (lights[i].attenuation.x +\r\n\t\t\t\t                     lights[i].attenuation.y * light_distance +\r\n\t\t\t\t                     lights[i].attenuation.z * light_distance * light_distance);\r\n\t\t\t}\r\n\r\n\t\t\t//  Phong-Blinn shading\r\n\r\n\t\t\tvec3 half_angle_direction = normalize(normalized_to_camera + light_direction_from);\r\n            \r\n            float ambient_intensity = attenuation;\r\n\t\t\tfloat  diffuse_intensity = attenuation *     max(0.0, dot(normalized_normal, light_direction_from));\r\n\t\t\tfloat specular_intensity = attenuation * pow(max(0.0, dot(normalized_normal, half_angle_direction)), shininess2);\r\n\r\n\t\t\tbasic_colour += ambient_surface * lights[i].ambient * ambient_intensity +\r\n\t\t\t                diffuse_surface * lights[i].diffuse * diffuse_intensity + \r\n                            specular_surface * lights[i].specular * specular_intensity;\r\n\t\t}\r\n\r\n\t// calculate the final colour\r\n\r\n\tif(separate_specular.a > 1.0)\r\n\t\tseparate_specular.a = 1.0;\r\n\r\n\tfloat basic_transparency = transparency2 * (1.0 - separate_specular.a);\r\n\r\n\tif(basic_transparency + separate_specular.a <= 0.0)\r\n\t\tdiscard;\r\n\r\n\tFragColor = vec4(basic_colour, basic_transparency) + separate_specular;\r\n}\r\n"},function(t,e,n){var r={"./Basic.txt":49,"./Dense.txt":50,"./Icy.txt":51,"./Leafy.txt":52,"./Rocky.txt":53,"./Sandy.txt":54,"./Simple.txt":55,"./Small.txt":56,"./Sparse.txt":57,"./Twisted.txt":58};function i(t){return n(a(t))}function a(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id=48},function(t,e){t.exports="DISK version 1\r\n159.835\r\n61\r\n5.61676\t34.6006\t6.55774\t\r\n4.5521\t49.1698\t8.0504\t\r\n6.29182\t17.456\t10.6\t\r\n19.2771\t30.399\t7.7341\t\r\n-5.63964\t-6.61964\t16.2699\t\r\n-34.8144\t-13.928\t13.8063\t\r\n17.7224\t44.1054\t6.06006\t\r\n16.9081\t56.4082\t6.2697\t\r\n-51.3318\t-2.99788\t6\t\r\n-61.6816\t3.18528\t6.0561\t\r\n2.67116\t-44.403\t22.4166\t\r\n-61.7976\t-8.87178\t6.00154\t\r\n20.3596\t-15.7251\t11.2777\t\r\n53.2492\t45.6392\t29.4998\t\r\n28.4818\t20.19\t6.01188\t\r\n-56.16\t-23.3322\t9.51902\t\r\n29.7014\t5.71352\t8.51594\t\r\n-4.05204\t60.2884\t6.00862\t\r\n-73.0756\t12.5486\t8.6916\t\r\n-13.4131\t76.324\t12.5593\t\r\n-73.0176\t-2.86702\t6.72414\t\r\n-72.7376\t-17.5524\t7.96394\t\r\n-69.9778\t-32.1062\t6.84908\t\r\n-21.5382\t-69.3478\t12.3445\t\r\n-43.1694\t-31.9836\t6.08872\t\r\n10.4786\t-94.7314\t28.5138\t\r\n68.47\t106.494\t33.2292\t\r\n-55.834\t-44.7244\t11.8756\t\r\n-90.5932\t35.5246\t20.2006\t\r\n-42.9236\t-77.4838\t10.5364\t\r\n58.784\t-6.65676\t23.0884\t\r\n30.7258\t-49.0178\t6.01498\t\r\n-23.5632\t-87.8066\t6.22514\t\r\n-50.58\t-62.8268\t6\t\r\n35.7504\t-30.2686\t9.89758\t\r\n-48.2148\t94.9572\t26.9168\t\r\n29.0574\t108.357\t6.22754\t\r\n-82.3006\t-74.0996\t27.664\t\r\n31.4576\t120.811\t6.45576\t\r\n106.947\t61.002\t26.3522\t\r\n-71.8658\t55.0002\t6.81826\t\r\n-14.8019\t95.3308\t6.4983\t\r\n-87.6702\t-35.6198\t11.1887\t\r\n39.751\t-56.9514\t6.00168\t\r\n-1.16644\t108.714\t12.6072\t\r\n42.0084\t-44.884\t6.0011\t\r\n-115.571\t-43.2198\t17.7283\t\r\n-10.0822\t-128.608\t11.1144\t\r\n-72.6896\t69.6884\t7.89294\t\r\n39.1888\t-68.9426\t6.0027\t\r\n42.1076\t-80.6828\t6.09486\t\r\n-59.1878\t-102.758\t7.0319\t\r\n-99.9152\t88.4796\t25.1878\t\r\n-117.585\t54.717\t12.919\t\r\n50.7834\t-36.2758\t6.29124\t\r\n53.196\t-63.5894\t8.99256\t\r\n-59.0672\t-116.049\t6.25942\t\r\n-113.225\t21.0036\t6.6893\t\r\n-72.514\t-107.455\t7.09802\t\r\n81.1576\t23.6564\t6.0266\t\r\n69.0202\t-52.9854\t10.0561\t\r\n"},function(t,e){t.exports="DISK version 1\r\n165.194\r\n80\r\n9.3735\t-12.4178\t6.27006\t\r\n-5.8237\t-12.4178\t8.92714\t\r\n5.0642\t4.52748\t11.2146\t\r\n19.732\t-5.17282\t6.3707\t\r\n22.065\t-19.7402\t8.38232\t\r\n-17.638\t4.23342\t11.4895\t\r\n28.4794\t9.0351\t10.3141\t\r\n-6.29568\t40.1366\t26.1626\t\r\n4.94784\t-28.6442\t10.549\t\r\n24.7206\t-40.4148\t12.4621\t\r\n-13.7916\t-27.6006\t8.21952\t\r\n4.66372\t-48.2688\t9.07774\t\r\n26.8472\t28.308\t9.02782\t\r\n47.1316\t64.7116\t32.6456\t\r\n-50.818\t16.9397\t24.0402\t\r\n-40.5108\t48.359\t9.02658\t\r\n-21.3986\t-13.5519\t6.68908\t\r\n-32.476\t-7.04808\t6.15642\t\r\n-55.8476\t46.9372\t6.37608\t\r\n-67.2374\t42.0956\t6\t\r\n-83.7048\t33.276\t12.6806\t\r\n8.68184\t68.5994\t6.00028\t\r\n49.681\t6.022\t11.1004\t\r\n-44.1666\t-13.6611\t7.275\t\r\n52.8536\t23.1696\t6.33832\t\r\n42.1762\t-57.4146\t11.9038\t\r\n-55.1308\t72.4974\t19.194\t\r\n57.6714\t-46.761\t6.90062\t\r\n64.823\t-63.8734\t11.646\t\r\n-100.741\t15.6107\t11.8612\t\r\n-88.7814\t2.32688\t6.0134\t\r\n63.7054\t29.533\t6.24162\t\r\n-117.79\t47.408\t24.2184\t\r\n23.8208\t-59.4158\t6.56036\t\r\n-13.86\t-41.821\t6.00094\t\r\n-32.4076\t61.2196\t6.17392\t\r\n-79.459\t65.7316\t6.0575\t\r\n-93.5314\t65.579\t6.09124\t\r\n-21.4176\t79.6272\t15.2648\t\r\n-72.2516\t53.2548\t6.23396\t\r\n63.8314\t17.0736\t6.21848\t\r\n76.4644\t36.2916\t8.19688\t\r\n-100.014\t-2.4143\t6.17848\t\r\n87.5072\t-10.6446\t30.235\t\r\n59.1468\t-81.9928\t7.3417\t\r\n59.7186\t-34.0134\t6.01032\t\r\n-38.585\t-32.6254\t7.5469\t\r\n-11.1638\t-56.1946\t8.62338\t\r\n52.3938\t-23.3174\t6.9532\t\r\n-81.8676\t80.2284\t8.63802\t\r\n-0.837974\t-66.9508\t6.28702\t\r\n-51\t-25.7744\t6.63284\t\r\n70.4678\t-43.0894\t6.41214\t\r\n-112.734\t1.04732\t7.00452\t\r\n-23.6042\t-70.8294\t10.5844\t\r\n11.723\t80.2176\t6.00944\t\r\n-57.5566\t-14.7871\t6.16222\t\r\n79.2182\t-111.544\t28.3816\t\r\n-120.854\t14.0353\t8.3126\t\r\n12.4704\t113.072\t26.8538\t\r\n113.052\t42.751\t28.9566\t\r\n79.6706\t-52.7318\t6.917\t\r\n46.9244\t-11.5704\t6.0048\t\r\n-88.8798\t-9.70646\t6.02034\t\r\n-103.223\t77.9878\t9.65382\t\r\n-72.4656\t101.067\t14.2232\t\r\n-38.8858\t91.756\t6.00112\t\r\n76.9042\t-77.0266\t6.21356\t\r\n-125.643\t-1.77456\t6.20904\t\r\n-70.665\t-29.2144\t13.3308\t\r\n-69.0064\t-9.50686\t6.44646\t\r\n-133.383\t21.3156\t6.1782\t\r\n52.2258\t121.129\t13.7099\t\r\n-78.9138\t-46.8464\t6.13532\t\r\n-29.1378\t100.896\t7.36164\t\r\n-42.2892\t103.266\t6.0017\t\r\n118.449\t8.2133\t6.00028\t\r\n-125.272\t84.0974\t13.2261\t\r\n82.3376\t-66.0802\t6.0072\t\r\n91.0326\t-76.9536\t7.9151\t\r\n"},function(t,e){t.exports="DISK version 1\r\n185.337\r\n33\r\n-15.2575\t-27.1104\t15.3536\t\r\n3.13284\t-48.2594\t12.6728\t\r\n4.18596\t-1.16633\t17.0677\t\r\n-31.2494\t2.83296\t18.5926\t\r\n-26.5832\t-59.7372\t19.183\t\r\n-43.089\t-32.1832\t12.9365\t\r\n19.1909\t-72.7696\t16.6294\t\r\n-56.5954\t-12.429\t10.9937\t\r\n43.7102\t-65.4534\t8.95818\t\r\n63.061\t-52.0396\t14.5872\t\r\n-67.429\t15.8489\t19.2885\t\r\n91.6198\t-67.4464\t17.8625\t\r\n-54.6148\t-51.919\t9.91846\t\r\n88.0654\t-103.856\t18.7202\t\r\n88.45\t-31.914\t17.811\t\r\n-38.7004\t37.0236\t16.4004\t\r\n-99.8386\t35.38\t18.5512\t\r\n-83.2754\t-50.9554\t18.7583\t\r\n-68.5578\t51.9822\t16.8623\t\r\n-97.4312\t72.2914\t18.4385\t\r\n110.581\t-87.0236\t9.3915\t\r\n-63.609\t86.8988\t18.4033\t\r\n124.515\t-111.124\t18.4469\t\r\n-93.089\t108.786\t18.3131\t\r\n-65.8306\t114.819\t9.60522\t\r\n102.307\t-128.531\t9.76986\t\r\n-126.443\t94.3738\t18.0213\t\r\n58.6206\t-25.0072\t12.8075\t\r\n-44.829\t110.579\t11.82\t\r\n74.4236\t-134.903\t15.1914\t\r\n-75.9216\t136.125\t13.9694\t\r\n135.698\t-86.3152\t8.76592\t\r\n-15.9913\t123.604\t19.8226\t\r\n"},function(t,e){t.exports="DISK version 1\r\n142.571\r\n72\r\n20\t-25.9808\t10\t\r\n0\t-25.9808\t10\t\r\n-10\t-43.3012\t10\t\r\n30\t-43.3012\t10\t\r\n-1.77636e-15\t-60.6218\t10\t\r\n20\t-60.6218\t10\t\r\n-20\t-60.6218\t10\t\r\n-10\t-77.9422\t10\t\r\n-30\t-43.3012\t10\t\r\n10\t-8.66026\t10\t\r\n-30\t-77.9422\t10\t\r\n-40\t-25.9808\t10\t\r\n10\t-77.9422\t10\t\r\n-3.55272e-15\t8.66026\t10\t\r\n-20\t8.66026\t10\t\r\n-50\t-8.66026\t10\t\r\n50\t-43.3012\t10\t\r\n10\t25.9808\t10\t\r\n-20\t-95.2628\t10\t\r\n-40\t8.66026\t10\t\r\n50\t-8.66026\t10\t\r\n60\t-25.9808\t10\t\r\n-30\t25.9808\t10\t\r\n70\t-43.3012\t10\t\r\n-40\t-95.2628\t10\t\r\n30\t25.9808\t10\t\r\n-20\t43.3012\t10\t\r\n-5.32908e-15\t-95.2628\t10\t\r\n80\t-25.9808\t10\t\r\n70\t-8.66026\t10\t\r\n60\t8.66026\t10\t\r\n-50\t-77.9422\t10\t\r\n-7.10542e-15\t43.3012\t10\t\r\n-60\t-25.9808\t10\t\r\n50\t-77.9422\t10\t\r\n20\t43.3012\t10\t\r\n-70\t-8.66026\t10\t\r\n-50\t-43.3012\t10\t\r\n20\t-95.2628\t10\t\r\n-30\t60.6218\t10\t\r\n-70\t-43.3012\t10\t\r\n-80\t-25.9808\t10\t\r\n80\t8.66026\t10\t\r\n10\t60.6218\t10\t\r\n-80\t-60.6218\t10\t\r\n-1.06581e-14\t77.9422\t10\t\r\n-60\t-95.2628\t10\t\r\n-90\t-43.3012\t10\t\r\n90\t-43.3012\t10\t\r\n-50\t-112.583\t10\t\r\n80\t-60.6218\t10\t\r\n100\t-25.9808\t10\t\r\n110\t-43.3012\t10\t\r\n50\t25.9808\t10\t\r\n70\t-77.9422\t10\t\r\n-70\t-77.9422\t10\t\r\n-50\t25.9808\t10\t\r\n40\t43.3012\t10\t\r\n100\t-60.6218\t10\t\r\n60\t43.3012\t10\t\r\n50\t60.6218\t10\t\r\n90\t-77.9422\t10\t\r\n-40\t77.9422\t10\t\r\n-30\t95.2628\t10\t\r\n-10\t95.2628\t10\t\r\n-20\t112.583\t10\t\r\n-90\t-8.66026\t10\t\r\n-110\t-43.3012\t10\t\r\n-40\t112.583\t10\t\r\n-50\t60.6218\t10\t\r\n-70\t-112.583\t10\t\r\n10\t95.2628\t10\t\r\n"},function(t,e){t.exports="DISK version 1\r\n83.7878\r\n53\r\n12.1729\t-21.8372\t6\t\r\n-33.8272\t-21.8372\t40\t\r\n14.4578\t-4.78044\t11.209\t\r\n1.96622\t7.05642\t6\t\r\n-6.72476\t15.3309\t6.00002\t\r\n10.6235\t-33.7582\t6.0214\t\r\n23.8758\t-19.1836\t6\t\r\n4.04784\t20.6188\t6.00038\t\r\n24.6346\t9.40724\t6.2511\t\r\n-6.04012\t27.5524\t6.24066\t\r\n24.1656\t-32.7394\t7.55892\t\r\n16.7584\t-44.0964\t6\t\r\n31.3388\t-9.41176\t6.29576\t\r\n-28.9254\t23.9038\t6.00288\t\r\n-43.3506\t25.761\t8.54152\t\r\n-56.4576\t18.6408\t6.3745\t\r\n28.6728\t-45.5272\t6\t\r\n-16.9657\t33.073\t6.0004\t\r\n-66.1254\t10.9168\t6\t\r\n34.6956\t2.41692\t6\t\r\n20.2152\t28.8984\t12.1638\t\r\n36.5144\t17.1492\t7.92872\t\r\n45.8588\t6.81992\t6.00016\t\r\n12.9631\t-55.4808\t6.00038\t\r\n44.1144\t-5.11088\t6.05748\t\r\n9.41212\t56.3554\t17.342\t\r\n38.2606\t30.968\t6\t\r\n35.7542\t-20.8874\t6\t\r\n37.7984\t-32.7872\t6.07408\t\r\n55.2948\t-0.594784\t6.00042\t\r\n-2.69878\t-55.7076\t6.00204\t\r\n-13.0778\t50.1026\t6.00098\t\r\n-12.8151\t-63.8862\t7.00678\t\r\n-28.6302\t35.9066\t6.0034\t\r\n52.0602\t-19.4846\t10.3662\t\r\n5.27374\t-65.2764\t6.45278\t\r\n-56.913\t31.007\t6\t\r\n-29.272\t52.2296\t10.3323\t\r\n40.6308\t-44.5244\t6.00002\t\r\n-39.9944\t39.91\t6.00002\t\r\n66.436\t3.86402\t6\t\r\n35.5204\t-55.3822\t6.00038\t\r\n-25.4278\t-67.0638\t6\t\r\n49.9074\t20.975\t6\t\r\n50.0972\t32.9798\t6.00622\t\r\n-37.411\t-67.6972\t6.00002\t\r\n47.4806\t-54.3794\t6.00174\t\r\n-68.1398\t22.7592\t6.01242\t\r\n42.3674\t-65.2374\t6\t\r\n-13.4695\t62.4296\t6.33216\t\r\n64.9004\t-8.4465\t6.40594\t\r\n60.8642\t26.7992\t6.40866\t\r\n68.1522\t15.7407\t6\t\r\n"},function(t,e){t.exports="DISK version 1\r\n182.836\r\n27\r\n1.9518\t-40.6093\t18.3474\r\n-9.6741\t-86.4797\t28.9734\r\n-12.1182\t-6.62117\t18.4379\r\n32.8074\t-8.04942\t26.5103\r\n39.1475\t-63.1402\t25.1401\r\n76.8618\t-32.1212\t23.6918\r\n2.47782\t39.0565\t29.5151\r\n77.0942\t14.9734\t23.4034\r\n-47.4266\t18.0442\t24.6326\r\n40.6324\t-119.418\t31.157\r\n53.3178\t56.1073\t24.1079\r\n115.439\t-8.48755\t21.5491\r\n-42.738\t65.1171\t22.6732\r\n-62.4986\t-91.4633\t24.0857\r\n-82.4627\t47.1592\t20.9219\r\n-94.3312\t-7.99792\t29.0165\r\n105.444\t57.9115\t28.0493\r\n-1.48101\t99.4299\t30.9879\r\n152.075\t25.752\t28.5961\r\n79.9736\t-84.951\t21.1468\r\n56.0443\t107.203\t27.0602\r\n25.2908\t142.821\t19.9978\r\n-123.31\t33.9857\t21.9973\r\n-152.009\t-7.76035\t28.6619\r\n-36.645\t-135.682\t27.1367\r\n114.853\t-58.5583\t22.5925\r\n92.1145\t-124.912\t20.6173\r\n"},function(t,e){t.exports="DISK version 1\r\n55.0\r\n3\r\n-20.0\t-15.0\t10.0\r\n-20.0\t15.0\t20.0\r\n20.0\t-15.0\t30.0\r\n"},function(t,e){t.exports="DISK version 1\r\n126.074\r\n73\r\n14.4281\t53.578\t18.9519\t\r\n-10.5268\t53.578\t6.0029\t\r\n-7.74654\t41.6852\t6.21058\t\r\n12.0684\t28.5738\t6.16336\t\r\n-25.3298\t35.0226\t6.01708\t\r\n11.3393\t6.9364\t15.4863\t\r\n-7.67674\t65.3158\t6.07608\t\r\n34.6758\t7.66774\t7.8617\t\r\n40.6\t44.7156\t8.67976\t\r\n-23.234\t58.5242\t7.63312\t\r\n-31.6082\t15.5912\t14.4034\t\r\n52.7078\t17.3423\t12.6018\t\r\n-31.8684\t45.7074\t6.50966\t\r\n11.9397\t78.711\t6.30396\t\r\n38.7462\t59.311\t6.03282\t\r\n-36.803\t57.2026\t6\t\r\n-44.2136\t47.7582\t6.0047\t\r\n63.8106\t42.2432\t14.6622\t\r\n58.2818\t-0.48312\t6.07476\t\r\n9.02358\t-25.4778\t17.0105\t\r\n-51.4758\t38.047\t6.12166\t\r\n68.014\t6.71656\t6.03102\t\r\n-48.6922\t58.908\t6.01082\t\r\n70.574\t22.6738\t6.04294\t\r\n-66.6582\t50.7942\t13.7024\t\r\n82.0696\t29.7554\t7.45878\t\r\n-55.1184\t22.2968\t10.0444\t\r\n51.864\t-10.7112\t6.00008\t\r\n-24.5386\t73.7196\t7.61824\t\r\n-18.9994\t86.8922\t6.67154\t\r\n-12.1627\t-2.94398\t10.0081\t\r\n47.262\t-23.686\t7.76674\t\r\n-41.2544\t68.389\t6.03958\t\r\n64.0396\t-11.3128\t6.19036\t\r\n-56.7438\t67.8204\t6.00008\t\r\n84.4876\t43.0254\t6.0296\t\r\n-35.2452\t-14.3152\t15.7233\t\r\n50.7542\t58.282\t6.01912\t\r\n43.1896\t-36.839\t6.00218\t\r\n75.0862\t-4.17968\t6.95912\t\r\n55.0674\t-35.0396\t6.01106\t\r\n33.2442\t70.145\t6.11834\t\r\n27.9262\t-40.7832\t7.31152\t\r\n64.632\t67.5744\t10.6824\t\r\n-49.7798\t87.898\t15.2508\t\r\n-13.0405\t-18.9321\t6.00402\t\r\n-62.1234\t7.84654\t6.01414\t\r\n-13.331\t-30.9326\t6\t\r\n-15.1348\t99.0474\t6.08314\t\r\n74.7504\t-17.1352\t6.0007\t\r\n80.3722\t57.6234\t7.93952\t\r\n61.8154\t-24.1566\t6.79434\t\r\n4.29834\t-47.998\t6.00004\t\r\n-29.4426\t94.0766\t6.0043\t\r\n13.389\t90.932\t6.00278\t\r\n-7.70822\t-42.4808\t6.84444\t\r\n85.017\t76.625\t11.6215\t\r\n11.1025\t-62.7824\t10.2749\t\r\n39.9562\t80.999\t6.64324\t\r\n69.0094\t-46.7534\t12.1987\t\r\n-68.8036\t70.806\t6.42392\t\r\n27.3104\t80.7178\t6.00578\t\r\n37.5642\t-54.1062\t9.13212\t\r\n-5.23986\t-70.3628\t7.73998\t\r\n41.0426\t94.8944\t7.29458\t\r\n32.5696\t-80.0136\t17.2524\t\r\n-80.174\t65.373\t6.17762\t\r\n9.2846\t-79.01\t6.05422\t\r\n-66.4368\t-3.36654\t6\t\r\n52.0788\t-58.3966\t6.00348\t\r\n-90.046\t52.842\t9.77498\t\r\n93.8132\t61.3468\t6.00782\t\r\n-5.68638\t-91.6144\t13.5162\t\r\n"},function(t,e){t.exports="DISK version 1\r\n201.784\r\n35\r\n8.01372\t-2.98592\t11.8126\t\r\n-42.9056\t-2.98592\t39.1066\t\r\n11.1726\t-42.6034\t27.9306\t\r\n-79.471\t-30.8914\t6.89064\t\r\n-102.206\t-14.2887\t21.261\t\r\n33.4124\t0.0984462\t13.7726\t\r\n-76.2798\t-93.695\t11.3239\t\r\n-58.9744\t-123.403\t23.057\t\r\n16.2623\t-101.968\t31.6514\t\r\n44.3898\t-66.9578\t13.258\t\r\n92.0668\t-77.436\t35.557\t\r\n-30.025\t-111.263\t8.3349\t\r\n-90.1556\t-40.0608\t7.18908\t\r\n-18.0399\t-123.798\t9.00776\t\r\n60.5432\t15.3027\t17.3279\t\r\n62.2418\t54.3102\t21.7164\t\r\n-146.985\t-47.8566\t34.703\t\r\n-105.209\t-99.2242\t18.1291\t\r\n-113.436\t-72.1918\t6.74206\t\r\n-131.364\t5.12146\t13.7672\t\r\n31.3178\t99.4618\t33.0098\t\r\n1.10735\t74.0118\t6.49182\t\r\n115.485\t70.1372\t33.8294\t\r\n72.4256\t84.96\t10.581\t\r\n-37.6044\t59.7678\t23.8706\t\r\n-61.233\t39.3152\t6.99402\t\r\n111.135\t28.77\t7.7659\t\r\n-59.566\t-169.026\t22.5694\t\r\n128.174\t-52.735\t8.19036\t\r\n-79.1306\t-146.28\t7.43292\t\r\n-28.8126\t97.7898\t15.1547\t\r\n-15.1152\t80.6276\t6.8035\t\r\n-19.1816\t151.844\t39.751\t\r\n72.0808\t103.49\t7.95172\t\r\n154.647\t-75.9804\t27.0404\t\r\n"},function(t,e){t.exports="DISK version 1\r\n237.372\r\n51\r\n-33.384\t16.2532\t35.7658\t\r\n3.39568\t49.5662\t13.8578\t\r\n-23.8772\t74.0036\t22.762\t\r\n-43.9596\t-26.681\t8.45176\t\r\n-31.5672\t-37.3088\t6.01942\t\r\n-47.1502\t-71.9364\t31.953\t\r\n-56.2232\t-18.8394\t6.10462\t\r\n-56.1348\t-34.8474\t6.20862\t\r\n7.37598\t70.8896\t7.83398\t\r\n-137.053\t107.579\t30.927\t\r\n-69.0192\t-39.2216\t7.39804\t\r\n63.5782\t-35.2868\t28.9014\t\r\n-65.9228\t-26.1462\t6.03906\t\r\n-78.0006\t-28.8338\t6.33416\t\r\n-44.0182\t125.312\t32.3582\t\r\n-77.9712\t-49.4532\t6.19696\t\r\n-67.4582\t-14.1256\t6.07916\t\r\n-117.004\t-70.0284\t37.927\t\r\n-34.1916\t-124.197\t21.8898\t\r\n36.0482\t-64.6546\t11.3522\t\r\n-91.6346\t149.995\t21.2754\t\r\n3.95176\t-149.082\t23.6534\t\r\n111.956\t-11.8413\t24.8582\t\r\n48.6354\t-85.098\t12.6554\t\r\n55.2634\t-132.954\t30.1332\t\r\n-85.1774\t-39.2374\t6.3047\t\r\n-79.1592\t-92.3302\t6.00052\t\r\n126.028\t15.6216\t6.00038\t\r\n72.37\t-76.0098\t12.7598\t\r\n-62.5698\t164.961\t11.416\t\r\n149.603\t9.418\t18.3768\t\r\n-129.603\t154.936\t17.0131\t\r\n147.565\t-20.735\t11.8449\t\r\n104.22\t-50.3844\t14.4537\t\r\n-102.417\t-27.9156\t6.00124\t\r\n-110.554\t186.915\t20.2094\t\r\n-43.4122\t-176.2\t30.9244\t\r\n131.671\t27.187\t6.86796\t\r\n82.511\t-94.7282\t8.52916\t\r\n-78.3804\t175.859\t7.78684\t\r\n121.772\t-119.266\t37.769\t\r\n86.8924\t-61.2744\t6.01144\t\r\n90.5124\t-82.137\t6.38936\t\r\n-84.3686\t188.291\t6.01186\t\r\n-96.6468\t-109.125\t6.15242\t\r\n-66.2632\t-117.528\t6.32496\t\r\n-14.242\t101.115\t6.01036\t\r\n-114.387\t-26.0688\t6.11048\t\r\n94.7282\t-70.4382\t6.04572\t\r\n90.7472\t-166.199\t18.4915\t\r\n-65.4754\t-135.062\t11.2271\t\r\n"},function(t,e,n){var r,i;!function(a){var s,o,l,u,c=1e3/60,h=0,d=0,m=60,f=.9,p=1e3,_=0,M=0,b=0,g=0,v=!1,y=!1,x=!1,E="object"==typeof window?window:a,w=E.requestAnimationFrame||(u=Date.now(),function(t){return o=Date.now(),l=Math.max(0,c-(o-u)),u=o+l,setTimeout(function(){t(o+l)},l)}),R=E.cancelAnimationFrame||clearTimeout,A=function(){},T=A,S=A,I=A,P=A;function D(t){if(s=w(D),t<d+g)return;h+=t-d;let e=t-d;for(d=t,T(t,e),t>_+p&&(m=f*M*1e3/(t-_)+(1-f)*m,_=t,M=0),M++,b=0;h>=c;)if(S(c),h-=c,++b>=240){x=!0;break}I(h/c),P(m,x),x=!1}a.MainLoop={getSimulationTimestep:function(){return c},setSimulationTimestep:function(t){return c=t,this},getFPS:function(){return m},getMaxAllowedFPS:function(){return 1e3/g},setMaxAllowedFPS:function(t){return void 0===t&&(t=1/0),0===t?this.stop():g=1e3/t,this},resetFrameDelta:function(){var t=h;return h=0,t},setBegin:function(t){return T=t||T,this},setUpdate:function(t){return S=t||S,this},setDraw:function(t){return I=t||I,this},setEnd:function(t){return P=t||P,this},start:function(){return y||(y=!0,s=w(function(t){I(1),v=!0,d=t,_=t,M=0,s=w(D)})),this},stop:function(){return v=!1,y=!1,R(s),this},isRunning:function(){return v}},r=a.MainLoop,void 0===(i="function"==typeof r?r.call(e,n,e,t):r)||(t.exports=i)}(this)}]);